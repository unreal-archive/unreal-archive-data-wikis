---
parse:
  title: "Legacy:Vehicle Weapon Changer Gun"
  text:
    text: "<p>sample Submitted by {DDG}Vaptor vehicle weapon changer gun</p>\n<p>Note:\
      \ this works and its from what im working on</p>\n<div class=\"hidden-block\"\
      >\n<div dir=\"ltr\" class=\"mw-geshi mw-code mw-content-ltr\">\n<div class=\"\
      uscript source-uscript\">\n<pre class=\"de1\"><span class=\"hint\"><span class=\"\
      sy0\">&lt;/</span>span<span class=\"sy0\">&gt;&lt;</span>div <span class=\"\
      kw1\">class</span><span class=\"sy0\">=</span><span class=\"st0\">\"hidden\"\
      </span><span class=\"sy0\">&gt;</span><span class=\"co1\">//=============================================================================</span>\n\
      <span class=\"co1\">// new allows to change the vehicle weapons</span>\n<span\
      \ class=\"co1\">//=============================================================================</span>\n\
      <span class=\"kw1\">class</span> mechGun <span class=\"kw1\">extends</span>\
      \ xwoeweapone;\n \n<span class=\"co1\">//Returns a sentinel belonging to the\
      \ player, or a sentinel belonging to the same team if !bOnlyOwn, or any Sentinel\
      \ if bAny.</span>\n<span class=\"kw1\">var</span> <span class=\"kw9\">bot</span>\
      \ BodgedBot;\n<span class=\"kw1\">var</span> <span class=\"kw5\">int</span>\
      \ NextCheckTime, UpgradeCheckTime;\n<span class=\"kw1\">var</span> <span class=\"\
      kw5\">vector</span> MarkerLocations<span class=\"br0\">[</span><span class=\"\
      nu0\">5</span><span class=\"br0\">]</span>;\n<span class=\"kw1\">var</span>\
      \ <span class=\"kw5\">int</span> currentdefmode;\n<span class=\"kw1\">var</span>\
      \ <span class=\"kw5\">bool</span> bAllowUpgrades, bAllowTeamUpgrades,bdeploycars;\n\
      <span class=\"kw1\">var</span> array<span class=\"sy0\">&lt;</span> class<span\
      \ class=\"sy0\">&lt;</span>onsWeapon<span class=\"sy0\">&gt;</span> <span class=\"\
      sy0\">&gt;</span> driverUpgradeClasses;\n<span class=\"kw1\">var</span> array<span\
      \ class=\"sy0\">&lt;</span> class<span class=\"sy0\">&lt;</span>onsWeaponPawn<span\
      \ class=\"sy0\">&gt;</span> <span class=\"sy0\">&gt;</span> PassengerUpgradeClasses;\n\
      <span class=\"kw1\">var</span> array<span class=\"sy0\">&lt;</span>string<span\
      \ class=\"sy0\">&gt;</span> Descriptions;\n<span class=\"kw1\">var</span><span\
      \ class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"kw9\">xEmitter</span>\
      \  chargeEmitter;\n<span class=\"kw1\">var</span> Mutsentaddon myMut;\n<span\
      \ class=\"kw1\">var</span> <span class=\"kw5\">name</span> upgradebone;\n<span\
      \ class=\"kw1\">var</span> <span class=\"kw5\">float</span> upgraderange, repammo,\
      \ nextgain;\n<span class=\"kw1\">var</span> class<span class=\"sy0\">&lt;</span>onsvehicle<span\
      \ class=\"sy0\">&gt;</span> upgradeVehicle;\n<span class=\"kw1\">var</span>\
      \ <span class=\"kw9\">onsvehicle</span> oldvehicle;\n<span class=\"kw1\">var</span><span\
      \ class=\"br0\">(</span><span class=\"br0\">)</span> array<span class=\"sy0\"\
      >&lt;</span> class<span class=\"sy0\">&lt;</span>onsvehicle<span class=\"sy0\"\
      >&gt;</span> <span class=\"sy0\">&gt;</span> configvehiclelist;\n<span class=\"\
      kw1\">var</span> <span class=\"kw9\">onsvehicle</span> myVehicle;\n<span class=\"\
      co1\">//==============dynamic list for geting all weapons loaded on server======</span>\n\
      <span class=\"kw1\">var</span> array<span class=\"sy0\">&lt;</span> class<span\
      \ class=\"sy0\">&lt;</span>onsweapon<span class=\"sy0\">&gt;</span> <span class=\"\
      sy0\">&gt;</span> vehadded;\n<span class=\"kw1\">var</span> <span class=\"kw1\"\
      >config</span> array<span class=\"sy0\">&lt;</span> class<span class=\"sy0\"\
      >&lt;</span>onsweapon<span class=\"sy0\">&gt;</span> <span class=\"sy0\">&gt;</span>\
      \ ConfigweaponList;\n<span class=\"kw1\">var</span> array<span class=\"sy0\"\
      >&lt;</span> class<span class=\"sy0\">&lt;</span>onsweaponpawn<span class=\"\
      sy0\">&gt;</span> <span class=\"sy0\">&gt;</span> weaponpawnList;\n<span class=\"\
      kw1\">var</span> array<span class=\"sy0\">&lt;</span> class<span class=\"sy0\"\
      >&lt;</span>onsweaponpawn<span class=\"sy0\">&gt;</span> <span class=\"sy0\"\
      >&gt;</span> ConfigweaponpawnList;\n\t<span class=\"kw1\">Struct</span> AmmoDivider\n\
      \t<span class=\"br0\">{</span>\n\t<span class=\"kw1\">var</span><span class=\"\
      br0\">(</span><span class=\"br0\">)</span> <span class=\"kw5\">int</span> FHP;\n\
      \t<span class=\"kw1\">var</span><span class=\"br0\">(</span><span class=\"br0\"\
      >)</span> <span class=\"kw5\">int</span> FSPd;\n\t<span class=\"kw1\">Var</span><span\
      \ class=\"br0\">(</span><span class=\"br0\">)</span> <span class=\"kw5\">int</span>\
      \ fmass;\n\t<span class=\"br0\">}</span>;\n<span class=\"kw1\">Var</span> Ammodivider\
      \ mydiv;\n \n<span class=\"kw1\">replication</span>\n<span class=\"br0\">{</span>\n\
      \    <span class=\"kw1\">reliable</span> <span class=\"kw2\">if</span> <span\
      \ class=\"br0\">(</span>bNetOwner <span class=\"sy0\">&amp;&amp;</span> bNetDirty\
      \ <span class=\"sy0\">&amp;&amp;</span> <span class=\"kw7\">Role</span> <span\
      \ class=\"sy0\">==</span> <span class=\"kw7\">ROLE_Authority</span><span class=\"\
      br0\">)</span>\n\tmydiv;\n \n\t<span class=\"kw1\">reliable</span> <span class=\"\
      kw2\">if</span><span class=\"br0\">(</span><span class=\"kw7\">Role</span> <span\
      \ class=\"sy0\">==</span> <span class=\"kw7\">ROLE_Authority</span><span class=\"\
      br0\">)</span>\n\t\toldvehicle,AddToUpgradeList,bAllowUpgrades,bAllowTeamUpgrades,vehadded,configvehiclelist,bdeploycars;\n\
      \ \n\t<span class=\"kw1\">unreliable</span> <span class=\"kw2\">if</span><span\
      \ class=\"br0\">(</span><span class=\"kw7\">Role</span> <span class=\"sy0\"\
      >==</span> <span class=\"kw7\">ROLE_Authority</span><span class=\"br0\">)</span>\n\
      \t\tMarkerLocations,repammo,nextgain;\n \n\t<span class=\"kw1\">reliable</span>\
      \ <span class=\"kw2\">if</span><span class=\"br0\">(</span><span class=\"kw7\"\
      >Role</span> <span class=\"sy0\">&lt;</span> <span class=\"kw7\">ROLE_Authority</span><span\
      \ class=\"br0\">)</span>\n\t\tkillscan, DoUpgrade, driverUpgradeClasses, myVehicle,\
      \ Checkupgrades,deploycar;\n \n<span class=\"br0\">}</span>\n \n<span class=\"\
      kw1\">simulated</span> <span class=\"kw1\">function</span> <span class=\"kw4\"\
      >PreBeginPlay</span><span class=\"br0\">(</span><span class=\"br0\">)</span>\n\
      <span class=\"br0\">{</span>\n        <span class=\"kw4\">SetTimer</span><span\
      \ class=\"br0\">(</span><span class=\"nu0\">1.0</span>,<span class=\"kw6\">true</span><span\
      \ class=\"br0\">)</span>;\n \n\t<span class=\"kw6\">Super</span>.<span class=\"\
      kw4\">PreBeginPlay</span><span class=\"br0\">(</span><span class=\"br0\">)</span>;\n\
      \ \n\tNextCheckTime <span class=\"sy0\">=</span> <span class=\"kw7\">Level</span>.<span\
      \ class=\"me0\">TimeSeconds</span> <span class=\"sy0\">+</span> <span class=\"\
      nu0\">1</span>;\n\tUpgradeCheckTime <span class=\"sy0\">=</span> NextCheckTime;\n\
      <span class=\"br0\">}</span>\n<span class=\"kw1\">function</span> <span class=\"\
      kw4\">PostBeginPlay</span><span class=\"br0\">(</span><span class=\"br0\">)</span>\n\
      <span class=\"br0\">{</span>\n<span class=\"kw1\">local</span> <span class=\"\
      kw5\">int</span> ic;\n \n\t<span class=\"kw6\">Super</span>.<span class=\"kw4\"\
      >PostBeginPlay</span><span class=\"br0\">(</span><span class=\"br0\">)</span>;\n\
      \ \n\t<span class=\"kw2\">if</span> <span class=\"br0\">(</span>myMut <span\
      \ class=\"sy0\">==</span> <span class=\"kw5\">None</span><span class=\"br0\"\
      >)</span>\n\t<span class=\"br0\">{</span>\n\tmymut<span class=\"sy0\">=</span><span\
      \ class=\"kw1\">class</span><span class=\"st0\">'mutSentaddon'</span>.<span\
      \ class=\"kw1\">static</span>.<span class=\"me0\">GetsentMutator</span><span\
      \ class=\"br0\">(</span><span class=\"kw7\">Level</span>.<span class=\"kw7\"\
      >Game</span><span class=\"br0\">)</span>;\n\t<span class=\"br0\">}</span>\n\
      \ \n\t<span class=\"kw2\">if</span> <span class=\"br0\">(</span>myMut <span\
      \ class=\"sy0\">!=</span> <span class=\"kw5\">None</span><span class=\"br0\"\
      >)</span>\n\t<span class=\"br0\">{</span>\n\t\t<span class=\"kw2\">if</span><span\
      \ class=\"br0\">(</span>mymut.<span class=\"me0\">vehAdded</span>.<span class=\"\
      me0\">length</span> <span class=\"sy0\">&gt;</span> vehadded.<span class=\"\
      me0\">length</span><span class=\"br0\">)</span>\n\t\t<span class=\"br0\">{</span>\n\
      \        \t\t<span class=\"kw2\">if</span><span class=\"br0\">(</span>vehadded.<span\
      \ class=\"me0\">length</span> <span class=\"sy0\">&lt;</span> mymut.<span class=\"\
      me0\">vehAdded</span>.<span class=\"me0\">length</span><span class=\"br0\">)</span>\n\
      \         \t\t<span class=\"br0\">{</span> <span class=\"co1\">// reinforce\
      \ data from client side</span>\n        \t\t vehadded.<span class=\"me0\">insert</span><span\
      \ class=\"br0\">(</span><span class=\"nu0\">0</span>,mymut.<span class=\"me0\"\
      >vehadded</span>.<span class=\"me0\">length</span><span class=\"br0\">)</span>;\n\
      \        \t\t\t<span class=\"br0\">}</span>\n\t\t\t\t<span class=\"kw2\">for</span><span\
      \ class=\"br0\">(</span>ic <span class=\"sy0\">=</span> <span class=\"nu0\"\
      >0</span>; ic <span class=\"sy0\">&lt;</span> mymut.<span class=\"me0\">vehAdded</span>.<span\
      \ class=\"me0\">Length</span>; ic<span class=\"sy0\">++</span><span class=\"\
      br0\">)</span>\n\t\t\t\t<span class=\"br0\">{</span>\n            \t\tvehadded<span\
      \ class=\"br0\">[</span>ic<span class=\"br0\">]</span><span class=\"sy0\">=</span>mymut.<span\
      \ class=\"me0\">Vehadded</span><span class=\"br0\">[</span>ic<span class=\"\
      br0\">]</span>;\n            \t\t<span class=\"br0\">}</span>\n \n        \t\
      <span class=\"br0\">}</span>\n        \t<span class=\"kw2\">else</span>\n  \
      \      \t<span class=\"br0\">{</span>\n        \t<span class=\"kw3\">log</span><span\
      \ class=\"br0\">(</span><span class=\"st0\">\"mutator preset parts\"</span><span\
      \ class=\"br0\">)</span>;\n        \t<span class=\"br0\">}</span>\n \n\t\t<span\
      \ class=\"kw2\">if</span><span class=\"br0\">(</span>mymut.<span class=\"me0\"\
      >bdeploycars</span> <span class=\"sy0\">||</span> bdeploycars<span class=\"\
      br0\">)</span>\n\t\t<span class=\"br0\">{</span>\n\t\t\tbdeploycars<span class=\"\
      sy0\">=</span><span class=\"kw6\">true</span>;\n \n\t\t\t<span class=\"kw2\"\
      >if</span><span class=\"br0\">(</span>configvehiclelist.<span class=\"me0\"\
      >length</span> <span class=\"sy0\">&lt;</span> mymut.<span class=\"me0\">configvehiclelist</span>.<span\
      \ class=\"me0\">length</span><span class=\"br0\">)</span>\n         \t<span\
      \ class=\"br0\">{</span> <span class=\"co1\">// reinforce data from client side</span>\n\
      \        \t\t configvehiclelist.<span class=\"me0\">insert</span><span class=\"\
      br0\">(</span><span class=\"nu0\">0</span>,mymut.<span class=\"me0\">configvehiclelist</span>.<span\
      \ class=\"me0\">length</span><span class=\"br0\">)</span>;\n \n\t\t\t\t<span\
      \ class=\"kw2\">for</span><span class=\"br0\">(</span>ic <span class=\"sy0\"\
      >=</span> <span class=\"nu0\">0</span>; ic <span class=\"sy0\">&lt;</span> mymut.<span\
      \ class=\"me0\">configvehiclelist</span>.<span class=\"me0\">Length</span>;\
      \ ic<span class=\"sy0\">++</span><span class=\"br0\">)</span>\n\t\t\t\t<span\
      \ class=\"br0\">{</span>\n            \t\t\tconfigvehiclelist<span class=\"\
      br0\">[</span>ic<span class=\"br0\">]</span><span class=\"sy0\">=</span>mymut.<span\
      \ class=\"me0\">configvehiclelist</span><span class=\"br0\">[</span>ic<span\
      \ class=\"br0\">]</span>;\n \n\t\t\t\t<span class=\"br0\">}</span>\n \n\t\t\t\
      <span class=\"br0\">}</span>\n \n\t\t<span class=\"br0\">}</span>\n\t<span class=\"\
      br0\">}</span>\n\t<span class=\"kw2\">else</span>\n\t<span class=\"br0\">{</span>\n\
      \    <span class=\"kw3\">log</span><span class=\"br0\">(</span><span class=\"\
      st0\">\"vehicle gun error no parts\"</span><span class=\"br0\">)</span>;\n\t\
      <span class=\"br0\">}</span>\n \n\t<span class=\"kw2\">if</span><span class=\"\
      br0\">(</span><span class=\"br0\">(</span><span class=\"kw7\">Role</span> <span\
      \ class=\"sy0\">&lt;</span> <span class=\"kw7\">ROLE_Authority</span><span class=\"\
      br0\">)</span> <span class=\"sy0\">&amp;&amp;</span> <span class=\"br0\">(</span>vehAdded.<span\
      \ class=\"me0\">length</span> <span class=\"sy0\">&gt;</span> <span class=\"\
      nu0\">0</span><span class=\"br0\">)</span><span class=\"br0\">)</span>\n\t\t\
      LoadUpgrades<span class=\"br0\">(</span><span class=\"br0\">)</span>;\n \n<span\
      \ class=\"br0\">}</span>\n \n<span class=\"kw1\">function</span> Checkupgrades<span\
      \ class=\"br0\">(</span><span class=\"br0\">)</span>\n<span class=\"br0\">{</span>\n\
      <span class=\"kw1\">local</span> <span class=\"kw5\">int</span> ic;\n \n<span\
      \ class=\"kw2\">if</span> <span class=\"br0\">(</span>myMut <span class=\"sy0\"\
      >==</span> <span class=\"kw5\">None</span><span class=\"br0\">)</span>\n<span\
      \ class=\"br0\">{</span>\nmymut<span class=\"sy0\">=</span><span class=\"kw1\"\
      >class</span><span class=\"st0\">'mutSentaddon'</span>.<span class=\"kw1\">static</span>.<span\
      \ class=\"me0\">GetsentMutator</span><span class=\"br0\">(</span><span class=\"\
      kw7\">Level</span>.<span class=\"kw7\">Game</span><span class=\"br0\">)</span>;\n\
      <span class=\"br0\">}</span>\n \n\t<span class=\"kw2\">if</span> <span class=\"\
      br0\">(</span>myMut <span class=\"sy0\">!=</span> <span class=\"kw5\">None</span><span\
      \ class=\"br0\">)</span>\n\t<span class=\"br0\">{</span>\n\t <span class=\"\
      kw2\">if</span><span class=\"br0\">(</span>mymut.<span class=\"me0\">vehAdded</span>.<span\
      \ class=\"me0\">length</span> <span class=\"sy0\">&gt;</span> vehadded.<span\
      \ class=\"me0\">length</span><span class=\"br0\">)</span>\n\t <span class=\"\
      br0\">{</span>\n        \t <span class=\"kw2\">if</span><span class=\"br0\"\
      >(</span>vehadded.<span class=\"me0\">length</span> <span class=\"sy0\">&lt;</span>\
      \ mymut.<span class=\"me0\">vehAdded</span>.<span class=\"me0\">length</span><span\
      \ class=\"br0\">)</span>\n         \t <span class=\"br0\">{</span> <span class=\"\
      co1\">// reinforce data from client side</span>\n          \t vehadded.<span\
      \ class=\"me0\">insert</span><span class=\"br0\">(</span><span class=\"nu0\"\
      >0</span>,mymut.<span class=\"me0\">vehadded</span>.<span class=\"me0\">length</span><span\
      \ class=\"br0\">)</span>;\n        \t <span class=\"br0\">}</span>\n\t\t<span\
      \ class=\"kw2\">for</span><span class=\"br0\">(</span>ic <span class=\"sy0\"\
      >=</span> <span class=\"nu0\">0</span>; ic <span class=\"sy0\">&lt;</span> mymut.<span\
      \ class=\"me0\">vehAdded</span>.<span class=\"me0\">Length</span>; ic<span class=\"\
      sy0\">++</span><span class=\"br0\">)</span>\n\t\t<span class=\"br0\">{</span>\n\
      \        \tvehadded<span class=\"br0\">[</span>ic<span class=\"br0\">]</span><span\
      \ class=\"sy0\">=</span>mymut.<span class=\"me0\">Vehadded</span><span class=\"\
      br0\">[</span>ic<span class=\"br0\">]</span>;\n        \t<span class=\"br0\"\
      >}</span>\n\t <span class=\"br0\">}</span>\n\t<span class=\"kw2\">if</span><span\
      \ class=\"br0\">(</span>mymut.<span class=\"me0\">bdeploycars</span> <span class=\"\
      sy0\">||</span> bdeploycars<span class=\"br0\">)</span>\n\t<span class=\"br0\"\
      >{</span>\n\tbdeploycars<span class=\"sy0\">=</span><span class=\"kw6\">true</span>;\n\
      \t<span class=\"br0\">}</span>\n\t\t\t<span class=\"kw2\">if</span><span class=\"\
      br0\">(</span>configvehiclelist.<span class=\"me0\">length</span> <span class=\"\
      sy0\">&lt;</span> mymut.<span class=\"me0\">configvehiclelist</span>.<span class=\"\
      me0\">length</span><span class=\"br0\">)</span>\n         \t\t<span class=\"\
      br0\">{</span> <span class=\"co1\">// reinforce data from client side</span>\n\
      \        \t\t configvehiclelist.<span class=\"me0\">insert</span><span class=\"\
      br0\">(</span><span class=\"nu0\">0</span>,mymut.<span class=\"me0\">configvehiclelist</span>.<span\
      \ class=\"me0\">length</span><span class=\"br0\">)</span>;\n \n\t\t\t\t<span\
      \ class=\"kw2\">for</span><span class=\"br0\">(</span>ic <span class=\"sy0\"\
      >=</span> <span class=\"nu0\">0</span>; ic <span class=\"sy0\">&lt;</span> mymut.<span\
      \ class=\"me0\">configvehiclelist</span>.<span class=\"me0\">Length</span>;\
      \ ic<span class=\"sy0\">++</span><span class=\"br0\">)</span>\n\t\t\t\t<span\
      \ class=\"br0\">{</span>\n            \t\t\tconfigvehiclelist<span class=\"\
      br0\">[</span>ic<span class=\"br0\">]</span><span class=\"sy0\">=</span>mymut.<span\
      \ class=\"me0\">configvehiclelist</span><span class=\"br0\">[</span>ic<span\
      \ class=\"br0\">]</span>;\n\t\t\t\t<span class=\"br0\">}</span>\n\t\t\t<span\
      \ class=\"br0\">}</span>\n \n\t<span class=\"kw2\">else</span>\n\t<span class=\"\
      br0\">{</span>\n   \t<span class=\"kw3\">log</span><span class=\"br0\">(</span><span\
      \ class=\"st0\">\"vehicle gun error no parts\"</span><span class=\"br0\">)</span>;\n\
      \t<span class=\"br0\">}</span>\n \n <span class=\"br0\">}</span>\n<span class=\"\
      br0\">}</span>\n<span class=\"kw1\">function</span> GiveTo<span class=\"br0\"\
      >(</span><span class=\"kw9\">Pawn</span> Other, <span class=\"kw1\">optional</span>\
      \ <span class=\"kw9\">Pickup</span> <span class=\"kw9\">Pickup</span><span class=\"\
      br0\">)</span>\n<span class=\"br0\">{</span>\n\t<span class=\"kw6\">Super</span>.<span\
      \ class=\"me0\">GiveTo</span><span class=\"br0\">(</span>Other, <span class=\"\
      kw9\">Pickup</span><span class=\"br0\">)</span>;\n \n\t<span class=\"kw2\">if</span><span\
      \ class=\"br0\">(</span><span class=\"kw7\">Role</span> <span class=\"sy0\"\
      >==</span> <span class=\"kw7\">ROLE_Authority</span> <span class=\"sy0\">&amp;&amp;</span>\
      \ <span class=\"kw7\">Instigator</span> <span class=\"sy0\">!=</span> <span\
      \ class=\"kw5\">None</span> <span class=\"sy0\">&amp;&amp;</span> <span class=\"\
      kw7\">Instigator</span>.<span class=\"kw9\">Controller</span>.<span class=\"\
      kw3\">IsA</span><span class=\"br0\">(</span><span class=\"st0\">'Bot'</span><span\
      \ class=\"br0\">)</span><span class=\"br0\">)</span>\n\t<span class=\"br0\"\
      >{</span>\n\t\tNextCheckTime <span class=\"sy0\">=</span> <span class=\"kw7\"\
      >Level</span>.<span class=\"me0\">TimeSeconds</span> <span class=\"sy0\">+</span>\
      \ <span class=\"nu0\">5</span>; <span class=\"co1\">//Never deploy right away.</span>\n\
      \t\tBodgedBot <span class=\"sy0\">=</span> <span class=\"kw9\">Bot</span><span\
      \ class=\"br0\">(</span><span class=\"kw7\">Instigator</span>.<span class=\"\
      kw9\">Controller</span><span class=\"br0\">)</span>;\n\t<span class=\"br0\"\
      >}</span>\n<span class=\"br0\">}</span>\n<span class=\"kw1\">simulated</span>\
      \ <span class=\"kw1\">function</span> <span class=\"kw9\">onsvehicle</span>\
      \ SentinelInRange<span class=\"br0\">(</span><span class=\"kw5\">float</span>\
      \ <span class=\"kw5\">Range</span>, <span class=\"kw5\">bool</span> bOnlyOwn,\
      \ <span class=\"kw1\">optional</span> <span class=\"kw5\">bool</span> bAny<span\
      \ class=\"br0\">)</span>\n<span class=\"br0\">{</span>\n\t<span class=\"kw1\"\
      >local</span> <span class=\"kw5\">Vector</span> HitLocation, HitNormal;\n\t\
      <span class=\"kw1\">local</span> <span class=\"kw9\">Actor</span> A;\n\t<span\
      \ class=\"kw1\">local</span> <span class=\"kw5\">Vector</span> X, Y, Z;\n \n\
      \t<span class=\"kw1\">local</span> <span class=\"kw5\">bool</span> bSameTeam;\n\
      \ \n\tGetViewAxes<span class=\"br0\">(</span>X, Y, Z<span class=\"br0\">)</span>;\n\
      \t<span class=\"kw2\">foreach</span> <span class=\"kw2\">TraceActors</span><span\
      \ class=\"br0\">(</span><span class=\"kw1\">class</span><span class=\"st0\"\
      >'Actor'</span>, A, HitLocation, HitNormal, <span class=\"kw7\">Instigator</span>.<span\
      \ class=\"kw7\">Location</span> <span class=\"sy0\">+</span> X <span class=\"\
      sy0\">*</span> <span class=\"kw5\">Range</span>, <span class=\"kw7\">Instigator</span>.<span\
      \ class=\"kw7\">Location</span><span class=\"br0\">)</span>\n\t<span class=\"\
      br0\">{</span>\n\t\t<span class=\"kw2\">if</span><span class=\"br0\">(</span>A\
      \ <span class=\"sy0\">==</span> <span class=\"kw5\">None</span><span class=\"\
      br0\">)</span>\n\t\t\t<span class=\"kw2\">continue</span>;\n \n\t\t<span class=\"\
      kw2\">if</span><span class=\"br0\">(</span>A.<span class=\"me0\">bWorldGeometry</span><span\
      \ class=\"br0\">)</span>\n\t\t\t<span class=\"kw2\">return</span> <span class=\"\
      kw5\">None</span>;\n \n\t\t<span class=\"kw2\">if</span><span class=\"br0\"\
      >(</span>A.<span class=\"kw3\">IsA</span><span class=\"br0\">(</span><span class=\"\
      st0\">'onsvehicle'</span><span class=\"br0\">)</span><span class=\"br0\">)</span>\n\
      \t\t<span class=\"br0\">{</span>\n\t\t\t<span class=\"kw2\">return</span> <span\
      \ class=\"kw9\">onsvehicle</span><span class=\"br0\">(</span>A<span class=\"\
      br0\">)</span>;\n\t\t<span class=\"br0\">}</span>\n\t<span class=\"br0\">}</span>\n\
      \ \n\t<span class=\"kw2\">return</span> <span class=\"kw5\">None</span>;\n<span\
      \ class=\"br0\">}</span>\n \n<span class=\"kw1\">simulated</span> <span class=\"\
      kw1\">function</span> <span class=\"kw5\">bool</span> HasAmmo<span class=\"\
      br0\">(</span><span class=\"br0\">)</span>\n<span class=\"br0\">{</span>\n\t\
      <span class=\"kw2\">return</span> <span class=\"kw6\">true</span>;\n<span class=\"\
      br0\">}</span>\n<span class=\"co1\">//Make bots really want this.</span>\n<span\
      \ class=\"co1\">//Bots should never try to wield the weapon.</span>\n<span class=\"\
      kw1\">function</span> <span class=\"kw5\">float</span> GetAIRating<span class=\"\
      br0\">(</span><span class=\"br0\">)</span>\n<span class=\"br0\">{</span>\n\t\
      <span class=\"kw2\">return</span> <span class=\"nu0\">0</span>;\n<span class=\"\
      br0\">}</span>\n<span class=\"co1\">// by vaptor we destroy the old car and\
      \ eject the peeps so they don't die</span>\n<span class=\"co1\">// then we register\
      \ a new old vehicle with the server</span>\n<span class=\"co1\">//Simulated\
      \ Function RegisterOwner(Onsvehicle newvehicle)</span>\n<span class=\"co1\"\
      >//{</span>\n<span class=\"co1\">//}</span>\n<span class=\"co1\">//================\
      \ ok this is the hard part =========== works 100%</span>\n<span class=\"kw1\"\
      >simulated</span> <span class=\"kw1\">function</span> setupdriverweapon<span\
      \ class=\"br0\">(</span><span class=\"kw9\">onsvehicle</span> upgradervehicle,\
      \ class<span class=\"sy0\">&lt;</span>onsweapon<span class=\"sy0\">&gt;</span>\
      \ newWeapon ,<span class=\"kw5\">int</span> i<span class=\"br0\">)</span>\n\
      <span class=\"br0\">{</span>\n<span class=\"kw1\">local</span> <span class=\"\
      kw5\">name</span> xb; <span class=\"co1\">// bone</span>\n<span class=\"kw1\"\
      >local</span> <span class=\"kw5\">bool</span> bkilled;\n \nbkilled<span class=\"\
      sy0\">=</span><span class=\"kw6\">false</span>;\n \n\t<span class=\"kw2\">if</span><span\
      \ class=\"br0\">(</span>upgradervehicle.<span class=\"me0\">Weapons</span><span\
      \ class=\"br0\">[</span>i<span class=\"br0\">]</span> <span class=\"sy0\">==</span>\
      \ <span class=\"kw5\">none</span> <span class=\"sy0\">&amp;&amp;</span> <span\
      \ class=\"sy0\">!</span>bkilled<span class=\"br0\">)</span>\n\t<span class=\"\
      br0\">{</span>\n\t<span class=\"kw7\">Instigator</span>.<span class=\"me0\"\
      >ReceiveLocalizedMessage</span><span class=\"br0\">(</span><span class=\"kw1\"\
      >class</span><span class=\"st0\">'HELMessage'</span>, <span class=\"nu0\">8</span><span\
      \ class=\"br0\">)</span>;\n\t<span class=\"kw2\">return</span>; <span class=\"\
      co1\">// prevents it from applying to non existant slots</span>\n\t<span class=\"\
      br0\">}</span>\n\t<span class=\"kw2\">if</span><span class=\"br0\">(</span>upgradervehicle.<span\
      \ class=\"me0\">Weapons</span><span class=\"br0\">[</span>i<span class=\"br0\"\
      >]</span> <span class=\"sy0\">!=</span> <span class=\"kw5\">none</span> <span\
      \ class=\"sy0\">&amp;&amp;</span> <span class=\"sy0\">!</span>bkilled<span class=\"\
      br0\">)</span>\n\t<span class=\"br0\">{</span>\n\tupgradervehicle.<span class=\"\
      me0\">Weapons</span><span class=\"br0\">[</span>i<span class=\"br0\">]</span>.<span\
      \ class=\"kw4\">destroy</span><span class=\"br0\">(</span><span class=\"br0\"\
      >)</span>;\n\tbkilled<span class=\"sy0\">=</span><span class=\"kw6\">true</span>;\n\
      \t<span class=\"br0\">}</span>\n\t<span class=\"co1\">// means there was a weapon\
      \ that we destroyed</span>\n\t<span class=\"kw2\">if</span><span class=\"br0\"\
      >(</span>bkilled<span class=\"br0\">)</span>\n\t<span class=\"br0\">{</span>\n\
      \tXB<span class=\"sy0\">=</span>upgradervehicle.<span class=\"kw1\">Default</span>.<span\
      \ class=\"me0\">DriverWeapons</span><span class=\"br0\">[</span>i<span class=\"\
      br0\">]</span>.<span class=\"me0\">WeaponBone</span>;\n            <span class=\"\
      co1\">// Spawn the new Weapon</span>\n            upgradervehicle.<span class=\"\
      me0\">Weapons</span><span class=\"br0\">[</span>i<span class=\"br0\">]</span>\
      \ <span class=\"sy0\">=</span> upgradervehicle.<span class=\"kw4\">spawn</span><span\
      \ class=\"br0\">(</span>newweapon, upgradervehicle,, upgradervehicle.<span class=\"\
      kw7\">Location</span>, <span class=\"kw3\">rot</span><span class=\"br0\">(</span><span\
      \ class=\"nu0\">0</span>,<span class=\"nu0\">0</span>,<span class=\"nu0\">0</span><span\
      \ class=\"br0\">)</span><span class=\"br0\">)</span>;\n            upgradervehicle.<span\
      \ class=\"kw4\">AttachToBone</span><span class=\"br0\">(</span>upgradervehicle.<span\
      \ class=\"me0\">Weapons</span><span class=\"br0\">[</span>i<span class=\"br0\"\
      >]</span>, XB<span class=\"br0\">)</span>;\n        <span class=\"kw2\">if</span>\
      \ <span class=\"br0\">(</span><span class=\"sy0\">!</span>upgradervehicle.<span\
      \ class=\"me0\">Weapons</span><span class=\"br0\">[</span>i<span class=\"br0\"\
      >]</span>.<span class=\"me0\">bAimable</span><span class=\"br0\">)</span>\n\
      \                upgradervehicle.<span class=\"me0\">Weapons</span><span class=\"\
      br0\">[</span>i<span class=\"br0\">]</span>.<span class=\"me0\">CurrentAim</span>\
      \ <span class=\"sy0\">=</span> <span class=\"kw3\">rot</span><span class=\"\
      br0\">(</span><span class=\"nu0\">0</span>,<span class=\"nu0\">32768</span>,<span\
      \ class=\"nu0\">0</span><span class=\"br0\">)</span>;\n        <span class=\"\
      br0\">}</span>\n \n    \t<span class=\"kw2\">if</span> <span class=\"br0\">(</span>upgradervehicle.<span\
      \ class=\"me0\">ActiveWeapon</span> <span class=\"sy0\">&lt;</span> upgradervehicle.<span\
      \ class=\"me0\">Weapons</span>.<span class=\"me0\">length</span><span class=\"\
      br0\">)</span>\n    \t<span class=\"br0\">{</span>\n            upgradervehicle.<span\
      \ class=\"me0\">PitchUpLimit</span> <span class=\"sy0\">=</span> upgradervehicle.<span\
      \ class=\"me0\">Weapons</span><span class=\"br0\">[</span>upgradervehicle.<span\
      \ class=\"me0\">ActiveWeapon</span><span class=\"br0\">]</span>.<span class=\"\
      me0\">PitchUpLimit</span>;\n            upgradervehicle.<span class=\"me0\"\
      >PitchDownLimit</span> <span class=\"sy0\">=</span> upgradervehicle.<span class=\"\
      me0\">Weapons</span><span class=\"br0\">[</span>upgradervehicle.<span class=\"\
      me0\">ActiveWeapon</span><span class=\"br0\">]</span>.<span class=\"me0\">PitchDownLimit</span>;\n\
      \    \t<span class=\"br0\">}</span>\n\tupgradervehicle.<span class=\"me0\">Weapons</span><span\
      \ class=\"br0\">[</span>i<span class=\"br0\">]</span>.<span class=\"me0\">team</span><span\
      \ class=\"sy0\">=</span><span class=\"kw7\">Instigator</span>.<span class=\"\
      me0\">getTeamnum</span><span class=\"br0\">(</span><span class=\"br0\">)</span>;\n\
      \tupgradervehicle.<span class=\"me0\">SetTeamNum</span><span class=\"br0\">(</span><span\
      \ class=\"kw7\">Instigator</span>.<span class=\"me0\">getTeamnum</span><span\
      \ class=\"br0\">(</span><span class=\"br0\">)</span><span class=\"br0\">)</span>;\n\
      \tupgradervehicle.<span class=\"me0\">TeamChanged</span><span class=\"br0\"\
      >(</span><span class=\"br0\">)</span>;\n<span class=\"br0\">}</span>\n<span\
      \ class=\"co1\">//============== ok driver weapon setup is ready now this part\
      \ gets messy ========</span>\n<span class=\"kw1\">simulated</span> <span class=\"\
      kw1\">function</span> setuppasweapon<span class=\"br0\">(</span><span class=\"\
      kw9\">onsvehicle</span> upgradervehicle, class<span class=\"sy0\">&lt;</span>onsweapon<span\
      \ class=\"sy0\">&gt;</span> newpaswep, <span class=\"kw5\">int</span> i<span\
      \ class=\"br0\">)</span>\n<span class=\"br0\">{</span>\n<span class=\"kw1\"\
      >local</span> <span class=\"kw5\">bool</span> bkilled;\n \nbkilled<span class=\"\
      sy0\">=</span><span class=\"kw6\">false</span>;\n \n\t<span class=\"kw2\">if</span><span\
      \ class=\"br0\">(</span>upgradervehicle.<span class=\"me0\">WeaponPawns</span><span\
      \ class=\"br0\">[</span>i<span class=\"br0\">]</span> <span class=\"sy0\">==</span>\
      \ <span class=\"kw5\">none</span> <span class=\"sy0\">&amp;&amp;</span> <span\
      \ class=\"sy0\">!</span>bkilled<span class=\"br0\">)</span>\n\t<span class=\"\
      br0\">{</span>\n\t<span class=\"kw7\">Instigator</span>.<span class=\"me0\"\
      >ReceiveLocalizedMessage</span><span class=\"br0\">(</span><span class=\"kw1\"\
      >class</span><span class=\"st0\">'HELMessage'</span>, <span class=\"nu0\">8</span><span\
      \ class=\"br0\">)</span>;\n\t<span class=\"kw2\">return</span>; <span class=\"\
      co1\">// prevents it from applying to non existant slots</span>\n\t<span class=\"\
      br0\">}</span>\n\t<span class=\"kw2\">if</span><span class=\"br0\">(</span>upgradervehicle.<span\
      \ class=\"me0\">WeaponPawns</span><span class=\"br0\">[</span>i<span class=\"\
      br0\">]</span>.<span class=\"me0\">gun</span> <span class=\"sy0\">!=</span>\
      \ <span class=\"kw5\">none</span> <span class=\"sy0\">&amp;&amp;</span> <span\
      \ class=\"sy0\">!</span>bkilled<span class=\"br0\">)</span>\n\t<span class=\"\
      br0\">{</span>\n\tupgradervehicle.<span class=\"me0\">WeaponPawns</span><span\
      \ class=\"br0\">[</span>i<span class=\"br0\">]</span>.<span class=\"me0\">gun</span>.<span\
      \ class=\"kw4\">destroy</span><span class=\"br0\">(</span><span class=\"br0\"\
      >)</span>;\n\tbkilled<span class=\"sy0\">=</span><span class=\"kw6\">true</span>;\n\
      \t<span class=\"br0\">}</span>\n        <span class=\"co1\">// Spawn the Passenger\
      \ Weapons</span>\n            <span class=\"co1\">// Spawn WeaponPawn</span>\n\
      \t<span class=\"kw2\">if</span><span class=\"br0\">(</span>bkilled<span class=\"\
      br0\">)</span>\n\t<span class=\"br0\">{</span>\n            upgradervehicle.<span\
      \ class=\"me0\">WeaponPawns</span><span class=\"br0\">[</span>i<span class=\"\
      br0\">]</span>.<span class=\"me0\">gun</span> <span class=\"sy0\">=</span> upgradervehicle.<span\
      \ class=\"me0\">WeaponPawns</span><span class=\"br0\">[</span>i<span class=\"\
      br0\">]</span>.<span class=\"kw4\">spawn</span><span class=\"br0\">(</span>newpaswep,upgradervehicle.<span\
      \ class=\"me0\">WeaponPawns</span><span class=\"br0\">[</span>i<span class=\"\
      br0\">]</span>,,upgradervehicle.<span class=\"me0\">WeaponPawns</span><span\
      \ class=\"br0\">[</span>i<span class=\"br0\">]</span>.<span class=\"kw7\">Location</span><span\
      \ class=\"br0\">)</span>;\n            upgradervehicle.<span class=\"me0\">WeaponPawns</span><span\
      \ class=\"br0\">[</span>i<span class=\"br0\">]</span>.<span class=\"me0\">AttachToVehicle</span><span\
      \ class=\"br0\">(</span>upgradervehicle,upgradervehicle.<span class=\"me0\"\
      >PassengerWeapons</span><span class=\"br0\">[</span>i<span class=\"br0\">]</span>.<span\
      \ class=\"me0\">WeaponBone</span><span class=\"br0\">)</span>;\n           \
      \ upgradervehicle.<span class=\"me0\">WeaponPawns</span><span class=\"br0\"\
      >[</span>i<span class=\"br0\">]</span>.<span class=\"me0\">ObjectiveGetOutDist</span>\
      \ <span class=\"sy0\">=</span> upgradervehicle.<span class=\"me0\">ObjectiveGetOutDist</span>;\n\
      \t<span class=\"br0\">}</span>\n\tupgradervehicle.<span class=\"me0\">WeaponPawns</span><span\
      \ class=\"br0\">[</span>i<span class=\"br0\">]</span>.<span class=\"me0\">gun</span>.<span\
      \ class=\"me0\">team</span><span class=\"sy0\">=</span><span class=\"kw7\">Instigator</span>.<span\
      \ class=\"me0\">getTeamnum</span><span class=\"br0\">(</span><span class=\"\
      br0\">)</span>;\n\tupgradervehicle.<span class=\"me0\">SetTeamNum</span><span\
      \ class=\"br0\">(</span><span class=\"kw7\">Instigator</span>.<span class=\"\
      me0\">getTeamnum</span><span class=\"br0\">(</span><span class=\"br0\">)</span><span\
      \ class=\"br0\">)</span>;\n\tupgradervehicle.<span class=\"me0\">TeamChanged</span><span\
      \ class=\"br0\">(</span><span class=\"br0\">)</span>;\n<span class=\"br0\">}</span>\n\
      <span class=\"co1\">//Change ammo icon do indicate which type of Sentinel may\
      \ be spawned.</span>\n<span class=\"kw1\">simulated</span> <span class=\"kw1\"\
      >event</span> WeaponTick<span class=\"br0\">(</span><span class=\"kw5\">float</span>\
      \ dt<span class=\"br0\">)</span>\n<span class=\"br0\">{</span>\n\t<span class=\"\
      kw1\">local</span> <span class=\"kw5\">int</span> ViewPitch;\n\t<span class=\"\
      kw1\">local</span> class<span class=\"sy0\">&lt;</span>Ammunition<span class=\"\
      sy0\">&gt;</span> A;\n \n\tViewPitch <span class=\"sy0\">=</span> <span class=\"\
      kw7\">Instigator</span>.<span class=\"me0\">GetViewRotation</span><span class=\"\
      br0\">(</span><span class=\"br0\">)</span>.<span class=\"me0\">Pitch</span>;\n\
      \ \n\t<span class=\"kw2\">if</span><span class=\"br0\">(</span><span class=\"\
      kw7\">level</span>.<span class=\"me0\">timeseconds</span> <span class=\"sy0\"\
      >&gt;</span> nextgain<span class=\"br0\">)</span>\n\t<span class=\"br0\">{</span>\n\
      \t<span class=\"kw2\">if</span><span class=\"br0\">(</span>repammo <span class=\"\
      sy0\">&lt;</span> <span class=\"nu0\">4</span><span class=\"br0\">)</span>\n\
      \t\tRepAmmo<span class=\"sy0\">+=</span><span class=\"nu0\">1</span>;\n \n\t\
      nextGain<span class=\"sy0\">=</span><span class=\"kw7\">level</span>.<span class=\"\
      me0\">timeseconds</span><span class=\"sy0\">+</span><span class=\"nu0\">2</span>;\n\
      \t<span class=\"br0\">}</span>\n \n\tA <span class=\"sy0\">=</span> GetAmmoClass<span\
      \ class=\"br0\">(</span><span class=\"nu0\">0</span><span class=\"br0\">)</span>;\n\
      \ \n\t<span class=\"kw2\">if</span><span class=\"br0\">(</span>A <span class=\"\
      sy0\">!=</span> <span class=\"kw5\">None</span><span class=\"br0\">)</span>\n\
      \t<span class=\"br0\">{</span>\n\t\t<span class=\"kw2\">if</span><span class=\"\
      br0\">(</span>ViewPitch <span class=\"sy0\">&gt;</span> <span class=\"nu0\"\
      >1124</span> <span class=\"sy0\">&amp;&amp;</span> ViewPitch <span class=\"\
      sy0\">&lt;</span> <span class=\"nu0\">31744</span><span class=\"br0\">)</span>\n\
      \t\t<span class=\"br0\">{</span>\n\t\t\tA.<span class=\"kw1\">Default</span>.<span\
      \ class=\"me0\">IconMaterial</span><span class=\"sy0\">=</span><span class=\"\
      kw5\">Finalblend</span><span class=\"st0\">'ammoslothel'</span>;\n\t\t\tA.<span\
      \ class=\"kw1\">Default</span>.<span class=\"me0\">IconCoords</span>.<span class=\"\
      me0\">X1</span> <span class=\"sy0\">=</span> <span class=\"nu0\">32</span>;\n\
      \t\t\tA.<span class=\"kw1\">Default</span>.<span class=\"me0\">IconCoords</span>.<span\
      \ class=\"me0\">Y1</span> <span class=\"sy0\">=</span> <span class=\"nu0\">32</span>;\n\
      \t\t\tA.<span class=\"kw1\">Default</span>.<span class=\"me0\">IconCoords</span>.<span\
      \ class=\"me0\">X2</span> <span class=\"sy0\">=</span> <span class=\"nu0\">96</span>;\n\
      \t\t\tA.<span class=\"kw1\">Default</span>.<span class=\"me0\">IconCoords</span>.<span\
      \ class=\"me0\">Y2</span> <span class=\"sy0\">=</span> <span class=\"nu0\">96</span>;\n\
      \t\t<span class=\"br0\">}</span>\n                <span class=\"kw2\">else</span>\n\
      \t\t<span class=\"br0\">{</span>\n\t\t\tA.<span class=\"kw1\">Default</span>.<span\
      \ class=\"me0\">IconMaterial</span><span class=\"sy0\">=</span><span class=\"\
      kw5\">FinalBlend</span><span class=\"st0\">'ammoslotsentNO'</span>;\n\t\t\t\
      A.<span class=\"kw1\">Default</span>.<span class=\"me0\">IconCoords</span>.<span\
      \ class=\"me0\">X1</span> <span class=\"sy0\">=</span> <span class=\"nu0\">0</span>;\n\
      \t\t\tA.<span class=\"kw1\">Default</span>.<span class=\"me0\">IconCoords</span>.<span\
      \ class=\"me0\">y1</span> <span class=\"sy0\">=</span> <span class=\"nu0\">0</span>;\n\
      \t\t\tA.<span class=\"kw1\">Default</span>.<span class=\"me0\">IconCoords</span>.<span\
      \ class=\"me0\">x2</span> <span class=\"sy0\">=</span> <span class=\"nu0\">64</span>;\n\
      \t\t\tA.<span class=\"kw1\">Default</span>.<span class=\"me0\">IconCoords</span>.<span\
      \ class=\"me0\">y2</span> <span class=\"sy0\">=</span> <span class=\"nu0\">64</span>;\n\
      \t\t<span class=\"br0\">}</span>\n\t<span class=\"br0\">}</span>\n \n<span class=\"\
      br0\">}</span>\n<span class=\"kw1\">simulated</span> <span class=\"kw1\">function</span>\
      \ <span class=\"kw4\">PostnetBeginPlay</span><span class=\"br0\">(</span><span\
      \ class=\"br0\">)</span>\n<span class=\"br0\">{</span>\n\t<span class=\"kw6\"\
      >Super</span>.<span class=\"kw4\">PostBeginPlay</span><span class=\"br0\">(</span><span\
      \ class=\"br0\">)</span>;\n \n\t<span class=\"kw2\">if</span><span class=\"\
      br0\">(</span><span class=\"kw7\">Role</span> <span class=\"sy0\">==</span>\
      \ <span class=\"kw7\">ROLE_Authority</span><span class=\"br0\">)</span>\n\t\t\
      LoadUpgrades<span class=\"br0\">(</span><span class=\"br0\">)</span>;\n<span\
      \ class=\"br0\">}</span>\n<span class=\"kw1\">simulated</span> <span class=\"\
      kw1\">Function</span> Loadupgrades<span class=\"br0\">(</span><span class=\"\
      br0\">)</span>\n<span class=\"br0\">{</span>\n<span class=\"kw1\">local</span>\
      \ <span class=\"kw5\">int</span> ic;\n          <span class=\"kw2\">if</span><span\
      \ class=\"br0\">(</span>vehadded.<span class=\"me0\">length</span> <span class=\"\
      sy0\">&gt;</span> driverUpgradeClasses.<span class=\"me0\">length</span><span\
      \ class=\"br0\">)</span>\n         <span class=\"br0\">{</span> <span class=\"\
      co1\">// reinforce data from client side</span>\n         driverUpgradeClasses.<span\
      \ class=\"me0\">insert</span><span class=\"br0\">(</span><span class=\"nu0\"\
      >0</span>,vehadded.<span class=\"me0\">length</span><span class=\"br0\">)</span>;\n\
      \t\t\t<span class=\"kw2\">for</span><span class=\"br0\">(</span>ic <span class=\"\
      sy0\">=</span> <span class=\"nu0\">0</span>; ic <span class=\"sy0\">&lt;</span>\
      \ vehAdded.<span class=\"me0\">Length</span>; ic<span class=\"sy0\">++</span><span\
      \ class=\"br0\">)</span>\n\t\t\t<span class=\"br0\">{</span>\n            \t\
      \tAddToUpgradeList<span class=\"br0\">(</span>ic,vehadded<span class=\"br0\"\
      >[</span>ic<span class=\"br0\">]</span><span class=\"br0\">)</span>;\n     \
      \       \t\t<span class=\"br0\">}</span>\n        <span class=\"br0\">}</span>\n\
      <span class=\"br0\">}</span>\n<span class=\"kw1\">simulated</span> <span class=\"\
      kw1\">function</span> DoUpgrade<span class=\"br0\">(</span> <span class=\"kw5\"\
      >int</span> i, <span class=\"kw1\">optional</span> class<span class=\"sy0\"\
      >&lt;</span>onsweapon<span class=\"sy0\">&gt;</span> driveUpgrade, <span class=\"\
      kw1\">optional</span> class<span class=\"sy0\">&lt;</span>onsweapon<span class=\"\
      sy0\">&gt;</span> pasUpgrade<span class=\"br0\">)</span>\n<span class=\"br0\"\
      >{</span>\n<span class=\"kw1\">local</span> <span class=\"kw9\">onsvehicle</span>\
      \ SentinelToUpgrade;\n\t<span class=\"kw2\">if</span><span class=\"br0\">(</span><span\
      \ class=\"sy0\">!</span>bAllowUpgrades<span class=\"br0\">)</span>\n\t<span\
      \ class=\"br0\">{</span>\n\t\t<span class=\"kw3\">warn</span><span class=\"\
      br0\">(</span><span class=\"st0\">\"Tried to add an upgrade but they are disabled.\"\
      </span><span class=\"br0\">)</span>;\n\t\t<span class=\"kw2\">return</span>;\n\
      \t<span class=\"br0\">}</span>\n\t<span class=\"kw2\">if</span><span class=\"\
      br0\">(</span>DriveUpgrade <span class=\"sy0\">==</span> <span class=\"kw5\"\
      >None</span> <span class=\"sy0\">&amp;&amp;</span> pasupgrade <span class=\"\
      sy0\">==</span> <span class=\"kw5\">none</span><span class=\"br0\">)</span>\n\
      \t<span class=\"br0\">{</span>\n\t\t<span class=\"kw3\">warn</span><span class=\"\
      br0\">(</span><span class=\"st0\">\"Tried to add an upgrade that doesn't exist.\"\
      </span><span class=\"br0\">)</span>;\n\t\t<span class=\"kw2\">return</span>;\n\
      \t<span class=\"br0\">}</span>\n\tSentinelToUpgrade <span class=\"sy0\">=</span>\
      \ SentinelInRange<span class=\"br0\">(</span><span class=\"kw1\">class</span><span\
      \ class=\"st0\">'mechFire'</span>.<span class=\"kw1\">Default</span>.<span class=\"\
      me0\">UpgradeRange</span>, <span class=\"kw6\">true</span><span class=\"br0\"\
      >)</span>;\n\t<span class=\"kw2\">if</span><span class=\"br0\">(</span>SentinelToUpgrade\
      \ <span class=\"sy0\">==</span> <span class=\"kw5\">None</span><span class=\"\
      br0\">)</span>\n\t<span class=\"br0\">{</span>\n\t\t<span class=\"kw7\">Instigator</span>.<span\
      \ class=\"me0\">ReceiveLocalizedMessage</span><span class=\"br0\">(</span><span\
      \ class=\"kw1\">class</span><span class=\"st0\">'HELMessage'</span>, <span class=\"\
      nu0\">9</span><span class=\"br0\">)</span>;\n\t\t<span class=\"kw2\">return</span>;\n\
      \t<span class=\"br0\">}</span>\n\t<span class=\"kw2\">if</span><span class=\"\
      br0\">(</span>AmmoAmount<span class=\"br0\">(</span><span class=\"nu0\">0</span><span\
      \ class=\"br0\">)</span> <span class=\"sy0\">&lt;</span> <span class=\"nu0\"\
      >20</span><span class=\"br0\">)</span>\n\t<span class=\"br0\">{</span>\n\t\t\
      <span class=\"kw7\">Instigator</span>.<span class=\"me0\">ReceiveLocalizedMessage</span><span\
      \ class=\"br0\">(</span><span class=\"kw1\">class</span><span class=\"st0\"\
      >'HELMessage'</span>, <span class=\"nu0\">8</span><span class=\"br0\">)</span>;\n\
      \t\t<span class=\"kw2\">return</span>;\n\t<span class=\"br0\">}</span>\n\t<span\
      \ class=\"kw2\">if</span><span class=\"br0\">(</span>driveupgrade <span class=\"\
      sy0\">==</span> <span class=\"kw1\">class</span><span class=\"st0\">'onslinkableweapon'</span>\
      \ <span class=\"sy0\">||</span> pasupgrade <span class=\"sy0\">==</span> <span\
      \ class=\"kw1\">class</span><span class=\"st0\">'onslinkableweapon'</span> <span\
      \ class=\"br0\">)</span>\n\t<span class=\"br0\">{</span>\n\t<span class=\"kw2\"\
      >return</span>;\n\t<span class=\"br0\">}</span>\n \n\t<span class=\"kw2\">if</span><span\
      \ class=\"br0\">(</span>driveupgrade <span class=\"sy0\">!=</span> <span class=\"\
      kw5\">none</span><span class=\"br0\">)</span>\n\t<span class=\"br0\">{</span>\n\
      \t\t<span class=\"kw2\">if</span><span class=\"br0\">(</span>AmmoAmount<span\
      \ class=\"br0\">(</span><span class=\"nu0\">0</span><span class=\"br0\">)</span>\
      \ <span class=\"sy0\">&gt;</span> <span class=\"nu0\">20</span><span class=\"\
      br0\">)</span>\n\t\t<span class=\"br0\">{</span>\n\t\tsetupdriverweapon<span\
      \ class=\"br0\">(</span>SentinelToUpgrade,driveUpgrade,I<span class=\"br0\"\
      >)</span>;\n\t\tConsumeAmmo<span class=\"br0\">(</span><span class=\"nu0\">0</span>,<span\
      \ class=\"nu0\">20</span><span class=\"br0\">)</span>;\n\t\t<span class=\"br0\"\
      >}</span>\n\t<span class=\"br0\">}</span>\n\t<span class=\"kw2\">else</span>\n\
      \t<span class=\"br0\">{</span>\n\t    <span class=\"kw2\">if</span><span class=\"\
      br0\">(</span>AmmoAmount<span class=\"br0\">(</span><span class=\"nu0\">0</span><span\
      \ class=\"br0\">)</span> <span class=\"sy0\">&gt;</span> <span class=\"nu0\"\
      >20</span><span class=\"br0\">)</span>\n\t\t<span class=\"br0\">{</span>\n\t\
      \tsetuppasweapon<span class=\"br0\">(</span>SentinelToUpgrade,pasUpgrade,I<span\
      \ class=\"br0\">)</span>;\n\t\tConsumeAmmo<span class=\"br0\">(</span><span\
      \ class=\"nu0\">0</span>,<span class=\"nu0\">20</span><span class=\"br0\">)</span>;\n\
      \t\t<span class=\"br0\">}</span>\n\t<span class=\"br0\">}</span>\n<span class=\"\
      br0\">}</span>\n<span class=\"kw1\">function</span> <span class=\"kw4\">Tick</span><span\
      \ class=\"br0\">(</span><span class=\"kw5\">float</span> DeltaTime<span class=\"\
      br0\">)</span>\n<span class=\"br0\">{</span>\n\t<span class=\"kw1\">local</span>\
      \ <span class=\"kw5\">name</span> BotState, BotOrders;\n \n\t<span class=\"\
      kw2\">if</span><span class=\"br0\">(</span><span class=\"kw7\">Level</span>.<span\
      \ class=\"me0\">TimeSeconds</span> <span class=\"sy0\">&gt;=</span> UpgradeCheckTime<span\
      \ class=\"br0\">)</span>\n\t<span class=\"br0\">{</span>\n\t\tUpgradeCheckTime\
      \ <span class=\"sy0\">=</span> <span class=\"kw7\">Level</span>.<span class=\"\
      me0\">TimeSeconds</span> <span class=\"sy0\">+</span> <span class=\"nu0\">1</span>;\n\
      \t\tmechFire<span class=\"br0\">(</span>FireMode<span class=\"br0\">[</span><span\
      \ class=\"nu0\">0</span><span class=\"br0\">]</span><span class=\"br0\">)</span>.<span\
      \ class=\"me0\">DoStuffe</span><span class=\"br0\">(</span><span class=\"br0\"\
      >)</span>;\n\t<span class=\"br0\">}</span>\n\t<span class=\"kw2\">if</span><span\
      \ class=\"br0\">(</span>BodgedBot <span class=\"sy0\">==</span> <span class=\"\
      kw5\">None</span> <span class=\"sy0\">||</span> <span class=\"kw7\">Level</span>.<span\
      \ class=\"kw7\">Game</span>.<span class=\"me0\">bGameEnded</span><span class=\"\
      br0\">)</span>\n\t\t<span class=\"kw2\">return</span>;\n\t<span class=\"kw2\"\
      >if</span><span class=\"br0\">(</span><span class=\"kw7\">Level</span>.<span\
      \ class=\"me0\">TimeSeconds</span> <span class=\"sy0\">&gt;=</span> NextCheckTime\
      \ <span class=\"sy0\">&amp;&amp;</span> <span class=\"kw3\">VSize</span><span\
      \ class=\"br0\">(</span><span class=\"kw7\">Instigator</span>.<span class=\"\
      kw7\">Velocity</span><span class=\"br0\">)</span> <span class=\"sy0\">&lt;</span>\
      \ <span class=\"nu0\">1</span><span class=\"br0\">)</span>\n\t<span class=\"\
      br0\">{</span>\n\tNextCheckTime <span class=\"sy0\">=</span> <span class=\"\
      kw7\">Level</span>.<span class=\"me0\">TimeSeconds</span> <span class=\"sy0\"\
      >+</span> <span class=\"nu0\">1</span>;\n\t<span class=\"br0\">}</span>\n<span\
      \ class=\"br0\">}</span>\n<span class=\"kw1\">simulated</span> <span class=\"\
      kw1\">Function</span> DeployCar<span class=\"br0\">(</span>class<span class=\"\
      sy0\">&lt;</span>onsvehicle<span class=\"sy0\">&gt;</span> Type, <span class=\"\
      kw5\">int</span> RequiredAmmo <span class=\"br0\">)</span>\n<span class=\"br0\"\
      >{</span>\n<span class=\"kw1\">local</span> <span class=\"kw5\">int</span> AmmoConsume;\n\
      <span class=\"kw1\">local</span> <span class=\"kw5\">int</span> zx;\n<span class=\"\
      kw1\">local</span> <span class=\"kw5\">Vector</span> X, Y, Z;\n<span class=\"\
      kw1\">local</span> <span class=\"kw5\">Vector</span> DeployLocation;\n \n<span\
      \ class=\"kw2\">if</span> <span class=\"br0\">(</span> <span class=\"sy0\">!</span><span\
      \ class=\"kw7\">Level</span>.<span class=\"kw7\">Game</span>.<span class=\"\
      me0\">bAllowVehicles</span><span class=\"br0\">)</span>\n<span class=\"br0\"\
      >{</span>\n<span class=\"kw7\">Level</span>.<span class=\"kw7\">Game</span>.<span\
      \ class=\"me0\">bAllowVehicles</span><span class=\"sy0\">=</span><span class=\"\
      kw6\">true</span>; \n<span class=\"br0\">}</span>\n \nGetViewAxes<span class=\"\
      br0\">(</span>X, Y, Z<span class=\"br0\">)</span>;\n<span class=\"kw2\">if</span><span\
      \ class=\"br0\">(</span>requiredammo <span class=\"sy0\">&gt;</span> <span class=\"\
      nu0\">200</span><span class=\"br0\">)</span>\n<span class=\"br0\">{</span>\n\
      requiredammo<span class=\"sy0\">=</span><span class=\"nu0\">150</span>;\n<span\
      \ class=\"br0\">}</span>\n<span class=\"kw2\">if</span><span class=\"br0\">(</span>killscan<span\
      \ class=\"br0\">(</span>type.<span class=\"kw1\">default</span>.<span class=\"\
      kw7\">CollisionRadius</span><span class=\"br0\">)</span> <span class=\"sy0\"\
      >&amp;&amp;</span> AmmoAmount<span class=\"br0\">(</span><span class=\"nu0\"\
      >0</span><span class=\"br0\">)</span> <span class=\"sy0\">&gt;=</span> RequiredAmmo<span\
      \ class=\"br0\">)</span>\n<span class=\"br0\">{</span>\n \n <span class=\"kw2\"\
      >IF</span><span class=\"br0\">(</span>oldVehicle <span class=\"sy0\">!=</span>\
      \ <span class=\"kw5\">none</span><span class=\"br0\">)</span>\n <span class=\"\
      br0\">{</span>\n\t<span class=\"kw2\">if</span><span class=\"br0\">(</span>oldvehicle.<span\
      \ class=\"me0\">Driver</span> <span class=\"sy0\">!=</span> <span class=\"kw5\"\
      >none</span><span class=\"br0\">)</span>\n\t<span class=\"br0\">{</span>\n\t\
      oldVehicle.<span class=\"me0\">EjectDriver</span><span class=\"br0\">(</span><span\
      \ class=\"br0\">)</span>;\n \n\t\t<span class=\"kw2\">if</span><span class=\"\
      br0\">(</span>oldvehicle.<span class=\"me0\">weaponpawns</span>.<span class=\"\
      me0\">length</span> <span class=\"sy0\">&gt;</span> <span class=\"nu0\">0</span><span\
      \ class=\"br0\">)</span>\n\t\t<span class=\"br0\">{</span>\n\t\t\t<span class=\"\
      kw2\">for</span> <span class=\"br0\">(</span>zx <span class=\"sy0\">=</span>\
      \ <span class=\"nu0\">0</span>; zx <span class=\"sy0\">&lt;</span> oldvehicle.<span\
      \ class=\"me0\">WeaponPawns</span>.<span class=\"me0\">length</span>; zx<span\
      \ class=\"sy0\">++</span><span class=\"br0\">)</span>\n\t\t\t<span class=\"\
      br0\">{</span>\n\t\t\toldvehicle.<span class=\"me0\">WeaponPawns</span><span\
      \ class=\"br0\">[</span>zx<span class=\"br0\">]</span>.<span class=\"me0\">EjectDriver</span><span\
      \ class=\"br0\">(</span><span class=\"br0\">)</span>;\n\t\t\toldvehicle.<span\
      \ class=\"me0\">WeaponPawns</span><span class=\"br0\">[</span>zx<span class=\"\
      br0\">]</span>.<span class=\"me0\">Died</span><span class=\"br0\">(</span><span\
      \ class=\"kw5\">None</span>, <span class=\"kw1\">class</span><span class=\"\
      st0\">'DamageType'</span>, oldvehicle.<span class=\"kw7\">Location</span><span\
      \ class=\"br0\">)</span>;\n\t\t\t<span class=\"br0\">}</span>\n\t\toldvehicle.<span\
      \ class=\"me0\">WeaponPawns</span>.<span class=\"me0\">length</span> <span class=\"\
      sy0\">=</span> <span class=\"nu0\">0</span>;\n\t\t<span class=\"br0\">}</span>\n\
      \ \n\toldvehicle.<span class=\"me0\">Died</span><span class=\"br0\">(</span><span\
      \ class=\"kw5\">None</span>, <span class=\"kw1\">class</span><span class=\"\
      st0\">'DamageType'</span>, oldvehicle.<span class=\"kw7\">Location</span><span\
      \ class=\"br0\">)</span>;\n\toldVehicle<span class=\"sy0\">=</span><span class=\"\
      kw5\">none</span>;\n\t<span class=\"br0\">}</span>\n \n <span class=\"br0\"\
      >}</span>\n \n <span class=\"kw2\">if</span><span class=\"br0\">(</span>oldvehicle\
      \ <span class=\"sy0\">==</span> <span class=\"kw5\">none</span><span class=\"\
      br0\">)</span><span class=\"co1\">//seems to work but won't spawn</span>\n <span\
      \ class=\"br0\">{</span>\n DeployLocation <span class=\"sy0\">=</span> <span\
      \ class=\"kw7\">Instigator</span>.<span class=\"kw7\">Location</span> <span\
      \ class=\"sy0\">+</span> <span class=\"br0\">(</span>X <span class=\"sy0\">*</span>\
      \ <span class=\"br0\">(</span><span class=\"nu0\">20.0</span> <span class=\"\
      sy0\">+</span> type.<span class=\"kw1\">default</span>.<span class=\"kw7\">CollisionRadius</span><span\
      \ class=\"br0\">)</span><span class=\"br0\">)</span> <span class=\"sy0\">+</span>\
      \ <span class=\"br0\">(</span>z <span class=\"sy0\">*</span> type.<span class=\"\
      kw1\">default</span>.<span class=\"kw7\">collisionheight</span><span class=\"\
      br0\">)</span>;\n OldVehicle<span class=\"sy0\">=</span> <span class=\"kw4\"\
      >Spawn</span><span class=\"br0\">(</span>type,,, DeployLocation, <span class=\"\
      kw3\">rot</span><span class=\"br0\">(</span><span class=\"nu0\">0</span>, <span\
      \ class=\"sy0\">-</span><span class=\"nu0\">16384</span>, <span class=\"nu0\"\
      >0</span><span class=\"br0\">)</span><span class=\"br0\">)</span>;\n ConsumeAmmo<span\
      \ class=\"br0\">(</span><span class=\"nu0\">0</span>,RequiredAmmo<span class=\"\
      br0\">)</span>;\n <span class=\"br0\">}</span>\n<span class=\"br0\">}</span>\n\
      <span class=\"br0\">}</span>\n \n<span class=\"kw1\">simulated</span> <span\
      \ class=\"kw1\">function</span> NewDrawWeaponInfo<span class=\"br0\">(</span><span\
      \ class=\"kw8\">Canvas</span> <span class=\"kw8\">Canvas</span>, <span class=\"\
      kw5\">float</span> YPos<span class=\"br0\">)</span>\n<span class=\"br0\">{</span>\n\
      \t<span class=\"kw1\">local</span> <span class=\"kw9\">PlayerController</span>\
      \ PC;\n \n\tPC <span class=\"sy0\">=</span> <span class=\"kw9\">PlayerController</span><span\
      \ class=\"br0\">(</span><span class=\"kw7\">Instigator</span>.<span class=\"\
      kw9\">Controller</span><span class=\"br0\">)</span>;\n \n\t<span class=\"kw2\"\
      >if</span><span class=\"br0\">(</span>PC <span class=\"sy0\">==</span> <span\
      \ class=\"kw5\">None</span><span class=\"br0\">)</span>\n\t\t<span class=\"\
      kw2\">return</span>;\n \n\t<span class=\"kw9\">HudBase</span><span class=\"\
      br0\">(</span>PC.<span class=\"me0\">myHUD</span><span class=\"br0\">)</span>.<span\
      \ class=\"me0\">TargetMaterial</span> <span class=\"sy0\">=</span> <span class=\"\
      kw5\">finalblend</span><span class=\"st0\">'Targetcores'</span>;\n \n\t<span\
      \ class=\"kw9\">HudBase</span><span class=\"br0\">(</span>PC.<span class=\"\
      me0\">myHUD</span><span class=\"br0\">)</span>.<span class=\"me0\">TargetMaterial</span>\
      \ <span class=\"sy0\">=</span> <span class=\"kw9\">HudBase</span><span class=\"\
      br0\">(</span>PC.<span class=\"me0\">myHUD</span><span class=\"br0\">)</span>.<span\
      \ class=\"kw1\">Default</span>.<span class=\"me0\">TargetMaterial</span>;\n\
      <span class=\"br0\">}</span>\n<span class=\"co1\">//=============================================================================</span>\n\
      <span class=\"co1\">// Utility functions:</span>\n<span class=\"co1\">//=============================================================================</span>\n\
      <span class=\"co1\">//Upgrades are replicated to clients here.</span>\n<span\
      \ class=\"kw1\">simulated</span> <span class=\"kw1\">function</span> AddToUpgradeList<span\
      \ class=\"br0\">(</span><span class=\"kw5\">int</span> i, class<span class=\"\
      sy0\">&lt;</span>onsweapon<span class=\"sy0\">&gt;</span> NextDriverClass<span\
      \ class=\"br0\">)</span>\n<span class=\"br0\">{</span>\n\t<span class=\"kw2\"\
      >if</span><span class=\"br0\">(</span>nextDriverClass <span class=\"sy0\">!=</span>\
      \ <span class=\"kw5\">none</span><span class=\"br0\">)</span>\n\t\tdriverUpgradeClasses<span\
      \ class=\"br0\">[</span>i<span class=\"br0\">]</span> <span class=\"sy0\">=</span>\
      \ NextDriver<span class=\"re0\">Class</span>&lt; SEMI &gt; <span class=\"co1\"\
      >// found a way to make it only need this data!</span>\n<span class=\"br0\"\
      >}</span>\n<span class=\"kw1\">static</span> <span class=\"kw1\">function</span>\
      \ <span class=\"kw5\">int</span> GetCost<span class=\"br0\">(</span>class<span\
      \ class=\"sy0\">&lt;</span>onsvehicle<span class=\"sy0\">&gt;</span> vehiclewanted,<span\
      \ class=\"kw5\">int</span> total<span class=\"br0\">)</span>\n<span class=\"\
      br0\">{</span>\n<span class=\"kw1\">local</span> <span class=\"kw5\">int</span>\
      \ totalother;\n<span class=\"kw1\">local</span> <span class=\"kw5\">float</span>\
      \ divspd;\n \n<span class=\"co1\">// use percentage logic crud this may be too\
      \ much math</span>\n<span class=\"kw2\">if</span><span class=\"br0\">(</span>vehiclewanted\
      \ <span class=\"sy0\">!=</span> <span class=\"kw5\">none</span><span class=\"\
      br0\">)</span>\n<span class=\"br0\">{</span>\ntotalother<span class=\"sy0\"\
      >=</span>vehiclewanted.<span class=\"kw1\">default</span>.<span class=\"me0\"\
      >GroundSpeed</span> <span class=\"sy0\">+</span> vehiclewanted.<span class=\"\
      kw1\">default</span>.<span class=\"me0\">airSpeed</span> <span class=\"sy0\"\
      >+</span> vehiclewanted.<span class=\"kw1\">default</span>.<span class=\"kw7\"\
      >mass</span> <span class=\"sy0\">+</span> vehiclewanted.<span class=\"kw1\"\
      >default</span>.<span class=\"me0\">health</span>;\n<span class=\"br0\">}</span>\n\
      divspd<span class=\"sy0\">=</span>total<span class=\"sy0\">/</span><span class=\"\
      nu0\">200</span>; <span class=\"co1\">// use to subtract from other values</span>\n\
      <span class=\"co1\">//log(total);</span>\n<span class=\"kw2\">return</span><span\
      \ class=\"br0\">(</span>totalother<span class=\"sy0\">/</span>divspd<span class=\"\
      br0\">)</span>;\n<span class=\"br0\">}</span>\n<span class=\"kw1\">simulated</span>\
      \ <span class=\"kw1\">function</span> BringUp<span class=\"br0\">(</span><span\
      \ class=\"kw1\">optional</span> <span class=\"kw9\">Weapon</span> PrevWeapon<span\
      \ class=\"br0\">)</span>\n<span class=\"br0\">{</span>\n    <span class=\"kw6\"\
      >Super</span>.<span class=\"me0\">BringUp</span><span class=\"br0\">(</span>PrevWeapon<span\
      \ class=\"br0\">)</span>;\n<span class=\"br0\">}</span>\n<span class=\"kw1\"\
      >simulated</span> <span class=\"kw1\">function</span> <span class=\"kw5\">bool</span>\
      \ PutDown<span class=\"br0\">(</span><span class=\"br0\">)</span>\n<span class=\"\
      br0\">{</span>\n    <span class=\"kw2\">if</span> <span class=\"br0\">(</span>\
      \ <span class=\"kw6\">Super</span>.<span class=\"me0\">PutDown</span><span class=\"\
      br0\">(</span><span class=\"br0\">)</span> <span class=\"br0\">)</span>\n  \
      \  <span class=\"br0\">{</span>\n\t\t<span class=\"kw3\">GotoState</span><span\
      \ class=\"br0\">(</span><span class=\"st0\">''</span><span class=\"br0\">)</span>;\n\
      \t\t<span class=\"kw2\">return</span> <span class=\"kw6\">true</span>;\n\t<span\
      \ class=\"br0\">}</span>\n\t<span class=\"kw2\">return</span> <span class=\"\
      kw6\">false</span>;\n<span class=\"br0\">}</span>\n \n<span class=\"kw1\">function</span>\
      \ <span class=\"kw5\">bool</span> killscan<span class=\"br0\">(</span><span\
      \ class=\"kw5\">int</span> radu<span class=\"br0\">)</span> <span class=\"co1\"\
      >// new code for telefragchecking by vaptor</span>\n<span class=\"br0\">{</span>\n\
      <span class=\"kw1\">local</span> <span class=\"kw5\">vector</span> checklocation,scy;\n\
      <span class=\"kw1\">local</span> <span class=\"kw5\">Vector</span> X, Y, Z,\
      \ HitLocation, HitNormal;\n<span class=\"kw1\">local</span> <span class=\"kw9\"\
      >actor</span> victimizedactor;\n \n\tGetViewAxes<span class=\"br0\">(</span>X,\
      \ Y, Z<span class=\"br0\">)</span>;\n \n\tcheckLocation <span class=\"sy0\"\
      >=</span> <span class=\"kw7\">Instigator</span>.<span class=\"kw7\">Location</span>\
      \ <span class=\"sy0\">+</span> X <span class=\"sy0\">*</span> <span class=\"\
      nu0\">100</span>;\n\tscy.<span class=\"me0\">x</span><span class=\"sy0\">=</span>radu;\n\
      \tscy.<span class=\"me0\">y</span><span class=\"sy0\">=</span>radu;\n\tscy.<span\
      \ class=\"me0\">z</span><span class=\"sy0\">=</span><span class=\"nu0\">16</span>;\n\
      \tVictimizedactor <span class=\"sy0\">=</span> <span class=\"kw4\">Trace</span><span\
      \ class=\"br0\">(</span>HitLocation, HitNormal, checkLocation, <span class=\"\
      kw7\">Instigator</span>.<span class=\"kw7\">Location</span> , <span class=\"\
      kw6\">true</span>, scy<span class=\"br0\">)</span>;\n \n\t <span class=\"co1\"\
      >// set it false first</span>\n \n\t<span class=\"kw2\">if</span><span class=\"\
      br0\">(</span>victimizedActor <span class=\"sy0\">!=</span> <span class=\"kw5\"\
      >none</span><span class=\"br0\">)</span>\n\t<span class=\"br0\">{</span>\n\t\
      \ <span class=\"kw2\">if</span><span class=\"br0\">(</span>victimizedActor.<span\
      \ class=\"kw3\">isa</span><span class=\"br0\">(</span><span class=\"st0\">'Pawn'</span><span\
      \ class=\"br0\">)</span><span class=\"br0\">)</span>\n\t <span class=\"br0\"\
      >{</span>\n\t\t<span class=\"kw2\">if</span><span class=\"br0\">(</span><span\
      \ class=\"kw9\">pawn</span><span class=\"br0\">(</span>victimizedActor<span\
      \ class=\"br0\">)</span> <span class=\"sy0\">!=</span> <span class=\"kw5\">none</span><span\
      \ class=\"br0\">)</span>\n\t\t<span class=\"br0\">{</span>\n\t\t\t<span class=\"\
      kw2\">if</span><span class=\"br0\">(</span><span class=\"kw9\">pawn</span><span\
      \ class=\"br0\">(</span>victimizedActor<span class=\"br0\">)</span>.<span class=\"\
      kw9\">Controller</span>.<span class=\"me0\">SameTeamAs</span><span class=\"\
      br0\">(</span><span class=\"kw7\">Instigator</span>.<span class=\"kw9\">Controller</span><span\
      \ class=\"br0\">)</span> <span class=\"br0\">)</span> <span class=\"co1\">//\
      \ confirmed! stop them now!</span>\n\t\t\t<span class=\"br0\">{</span>\n\t\t\
      \t\t<span class=\"kw2\">return</span> <span class=\"kw6\">false</span>;\n\t\t\
      \t<span class=\"br0\">}</span>\n\t\t\t<span class=\"kw2\">else</span>\n\t\t\t\
      <span class=\"br0\">{</span>\n\t\t\t\t<span class=\"kw2\">return</span> <span\
      \ class=\"kw6\">true</span>;\n\t\t\t<span class=\"br0\">}</span>\n\t\t<span\
      \ class=\"br0\">}</span>\n\t\t<span class=\"kw2\">else</span>\n\t\t<span class=\"\
      br0\">{</span>\n\t\t\t<span class=\"kw2\">return</span> <span class=\"kw6\"\
      >true</span>;\n\t\t<span class=\"br0\">}</span>\n \n\t <span class=\"br0\">}</span>\n\
      \ \n\t<span class=\"br0\">}</span>\n\t<span class=\"kw2\">return</span> <span\
      \ class=\"kw6\">true</span>;\n<span class=\"br0\">}</span>\n<span class=\"kw1\"\
      >defaultproperties</span>\n<span class=\"br0\">{</span>\n     bAllowUpgrades<span\
      \ class=\"sy0\">=</span><span class=\"kw6\">True</span>\n     upgraderange<span\
      \ class=\"sy0\">=</span><span class=\"nu0\">1200.000000</span>\n     FireModeClass<span\
      \ class=\"br0\">(</span><span class=\"nu0\">0</span><span class=\"br0\">)</span><span\
      \ class=\"sy0\">=</span><span class=\"kw1\">Class</span><span class=\"st0\"\
      >'sentsv12.mechFire'</span>\n     FireModeClass<span class=\"br0\">(</span><span\
      \ class=\"nu0\">1</span><span class=\"br0\">)</span><span class=\"sy0\">=</span><span\
      \ class=\"kw1\">Class</span><span class=\"st0\">'sentsv12.mechlaunchFire'</span>\n\
      \     IdleAnim<span class=\"sy0\">=</span><span class=\"st0\">\"Idle\"</span>\n\
      \     SelectAnim<span class=\"sy0\">=</span><span class=\"st0\">\"Select\"</span>\n\
      \     SelectSound<span class=\"sy0\">=</span><span class=\"kw5\">Sound</span><span\
      \ class=\"st0\">'WeaponSounds.Misc.shieldgun_change'</span>\n     SelectForce<span\
      \ class=\"sy0\">=</span><span class=\"st0\">\"ShieldGun_change\"</span>\n  \
      \   AIRating<span class=\"sy0\">=</span><span class=\"nu0\">1.500000</span>\n\
      \     CurrentRating<span class=\"sy0\">=</span><span class=\"nu0\">1.500000</span>\n\
      \     Description<span class=\"sy0\">=</span><span class=\"st0\">\"NEW weapon\
      \ technology useing thinking machines to provide general support for soldiers\"\
      </span>\n     EffectOffset<span class=\"sy0\">=</span><span class=\"br0\">(</span>X<span\
      \ class=\"sy0\">=</span><span class=\"nu0\">70.000000</span>,Y<span class=\"\
      sy0\">=</span><span class=\"nu0\">10.000000</span><span class=\"br0\">)</span>\n\
      \     SmallViewOffset<span class=\"sy0\">=</span><span class=\"br0\">(</span>X<span\
      \ class=\"sy0\">=</span><span class=\"nu0\">23.000000</span>,Y<span class=\"\
      sy0\">=</span><span class=\"nu0\">6.000000</span>,Z<span class=\"sy0\">=-</span><span\
      \ class=\"nu0\">6.000000</span><span class=\"br0\">)</span>\n     CenteredOffsetY<span\
      \ class=\"sy0\">=-</span><span class=\"nu0\">5.000000</span>\n     CenteredRoll<span\
      \ class=\"sy0\">=</span><span class=\"nu0\">5000</span>\n     CenteredYaw<span\
      \ class=\"sy0\">=-</span><span class=\"nu0\">300</span>\n     CustomCrosshair<span\
      \ class=\"sy0\">=</span><span class=\"nu0\">31</span>\n     CustomCrossHairColor<span\
      \ class=\"sy0\">=</span><span class=\"br0\">(</span>G<span class=\"sy0\">=</span><span\
      \ class=\"nu0\">0</span>,R<span class=\"sy0\">=</span><span class=\"nu0\">0</span><span\
      \ class=\"br0\">)</span>\n     CustomCrossHairTextureName<span class=\"sy0\"\
      >=</span><span class=\"st0\">\"AS_FX_TX.Icons.OBJ_Destroy_Tex\"</span>\n   \
      \  InventoryGroup<span class=\"sy0\">=</span><span class=\"nu0\">8</span>\n\
      \     GroupOffset<span class=\"sy0\">=</span><span class=\"nu0\">158</span>\n\
      \     PlayerViewOffset<span class=\"sy0\">=</span><span class=\"br0\">(</span>X<span\
      \ class=\"sy0\">=</span><span class=\"nu0\">11.000000</span><span class=\"br0\"\
      >)</span>\n     BobDamping<span class=\"sy0\">=</span><span class=\"nu0\">1.575000</span>\n\
      \     AttachmentClass<span class=\"sy0\">=</span><span class=\"kw1\">Class</span><span\
      \ class=\"st0\">'sentsv12.mechAttach'</span>\n     IconMaterial<span class=\"\
      sy0\">=</span><span class=\"kw5\">FinalBlend</span><span class=\"st0\">'AS_FX_TX.Icons.OBJ_HellBender_FB'</span>\n\
      \     IconCoords<span class=\"sy0\">=</span><span class=\"br0\">(</span>X2<span\
      \ class=\"sy0\">=</span><span class=\"nu0\">64</span>,Y2<span class=\"sy0\"\
      >=</span><span class=\"nu0\">64</span><span class=\"br0\">)</span>\n     ItemName<span\
      \ class=\"sy0\">=</span><span class=\"st0\">\"VehicleMechanic\"</span>\n   \
      \  <span class=\"kw5\">Mesh</span><span class=\"sy0\">=</span><span class=\"\
      kw5\">SkeletalMesh</span><span class=\"st0\">'Weapons.BallLauncher_1st'</span>\n\
      \     <span class=\"kw7\">DrawScale</span><span class=\"sy0\">=</span><span\
      \ class=\"nu0\">0.400000</span>\n     <span class=\"kw7\">Skins</span><span\
      \ class=\"br0\">(</span><span class=\"nu0\">0</span><span class=\"br0\">)</span><span\
      \ class=\"sy0\">=</span><span class=\"kw5\">Combiner</span><span class=\"st0\"\
      >'sentsv12.Beams.ANGLETRAILxx'</span>\n     <span class=\"kw7\">Skins</span><span\
      \ class=\"br0\">(</span><span class=\"nu0\">1</span><span class=\"br0\">)</span><span\
      \ class=\"sy0\">=</span><span class=\"kw5\">FinalBlend</span><span class=\"\
      st0\">'sentsv12.Beams.casedvortex'</span>\n     <span class=\"kw7\">Skins</span><span\
      \ class=\"br0\">(</span><span class=\"nu0\">2</span><span class=\"br0\">)</span><span\
      \ class=\"sy0\">=</span><span class=\"kw5\">Shader</span><span class=\"st0\"\
      >'sentsv12.Beams.coilshader'</span>\n<span class=\"br0\">}</span></span></pre></div>\n\
      </div>\n</div>\n<p><a href=\"/Category:Legacy_Custom_Class_(UT2004)\" title=\"\
      Category:Legacy Custom Class (UT2004)\">Category:Legacy Custom Class (UT2004)</a></p>\n\
      <p><a href=\"/Category:Legacy_To_Do\" title=\"Category:Legacy To Do\">Category:Legacy\
      \ To Do</a> what is this? the parent class doesn't show up on wiki. Delete it?</p>\n\
      \n<!-- \nNewPP limit report\nCPU time usage: 0.197 seconds\nReal time usage:\
      \ 0.365 seconds\nPreprocessor visited node count: 8/1000000\nPreprocessor generated\
      \ node count: 44/1000000\nPost‐expand include size: 52/2097152 bytes\nTemplate\
      \ argument size: 0/2097152 bytes\nHighest expansion depth: 2/40\nExpensive parser\
      \ function count: 0/100\n-->\n\n<!-- \nTransclusion expansion time report (%,ms,calls,template)\n\
      100.00%    0.000      1 - -total\n-->\n\n<!-- Saved in parser cache with key\
      \ wiki:pcache:idhash:3668-0!*!0!*!*!*!* and timestamp 20221118160505 and revision\
      \ id 9333\n -->\n"
  categories:
  - sortkey: "Vehicle Weapon Changer Gun"
    name: "Legacy_Custom_Class_(UT2004)"
  - sortkey: "Vehicle Weapon Changer Gun"
    name: "Legacy_To_Do"
  links:
  - ns: 14
    exists: true
    name: "Category:Legacy To Do"
  - ns: 14
    exists: true
    name: "Category:Legacy Custom Class (UT2004)"
  templates: []
  images: []
  externallinks: []
  sections: []
  displaytitle: "Legacy:Vehicle Weapon Changer Gun"
  iwlinks: []
  wikitext:
    text: "sample Submitted by {DDG}Vaptor vehicle weapon changer gun \n\nNote: this\
      \ works and its from what im working on\n\n<div class=\"hidden-block\"><span\
      \ class=\"hint\"><uscript></span><div class=\"hidden\">//=============================================================================\n\
      // new allows to change the vehicle weapons\n//=============================================================================\n\
      class mechGun extends xwoeweapone;\n\n//Returns a sentinel belonging to the\
      \ player, or a sentinel belonging to the same team if !bOnlyOwn, or any Sentinel\
      \ if bAny.\nvar bot BodgedBot;\nvar int NextCheckTime, UpgradeCheckTime;\nvar\
      \ vector MarkerLocations[5];\nvar int currentdefmode;\nvar bool bAllowUpgrades,\
      \ bAllowTeamUpgrades,bdeploycars;\nvar array< class<onsWeapon> > driverUpgradeClasses;\n\
      var array< class<onsWeaponPawn> > PassengerUpgradeClasses;\nvar array<string>\
      \ Descriptions;\nvar() xEmitter  chargeEmitter;\nvar Mutsentaddon myMut;\nvar\
      \ name upgradebone;\nvar float upgraderange, repammo, nextgain;\nvar class<onsvehicle>\
      \ upgradeVehicle;\nvar onsvehicle oldvehicle;\nvar() array< class<onsvehicle>\
      \ > configvehiclelist;\nvar onsvehicle myVehicle;\n//==============dynamic list\
      \ for geting all weapons loaded on server======\nvar array< class<onsweapon>\
      \ > vehadded;\nvar config array< class<onsweapon> > ConfigweaponList;\nvar array<\
      \ class<onsweaponpawn> > weaponpawnList;\nvar array< class<onsweaponpawn> >\
      \ ConfigweaponpawnList;\n\tStruct AmmoDivider\n\t{\n\tvar() int FHP;\n\tvar()\
      \ int FSPd;\n\tVar() int fmass;\n\t};\nVar Ammodivider mydiv;\n\nreplication\n\
      {\n    reliable if (bNetOwner && bNetDirty && Role == ROLE_Authority)\n\tmydiv;\n\
      \n\treliable if(Role == ROLE_Authority)\n\t\toldvehicle,AddToUpgradeList,bAllowUpgrades,bAllowTeamUpgrades,vehadded,configvehiclelist,bdeploycars;\n\
      \n\tunreliable if(Role == ROLE_Authority)\n\t\tMarkerLocations,repammo,nextgain;\n\
      \n\treliable if(Role < ROLE_Authority)\n\t\tkillscan, DoUpgrade, driverUpgradeClasses,\
      \ myVehicle, Checkupgrades,deploycar;\n\n}\n\nsimulated function PreBeginPlay()\n\
      {\n        SetTimer(1.0,true);\n\n\tSuper.PreBeginPlay();\n\n\tNextCheckTime\
      \ = Level.TimeSeconds + 1;\n\tUpgradeCheckTime = NextCheckTime;\n}\nfunction\
      \ PostBeginPlay()\n{\nlocal int ic;\n\n\tSuper.PostBeginPlay();\n\n\tif (myMut\
      \ == None)\n\t{\n\tmymut=class'mutSentaddon'.static.GetsentMutator(Level.Game);\n\
      \t}\n\n\tif (myMut != None)\n\t{\n\t\tif(mymut.vehAdded.length > vehadded.length)\n\
      \t\t{\n        \t\tif(vehadded.length < mymut.vehAdded.length)\n         \t\t\
      { // reinforce data from client side\n        \t\t vehadded.insert(0,mymut.vehadded.length);\n\
      \        \t\t\t}\n\t\t\t\tfor(ic = 0; ic < mymut.vehAdded.Length; ic++)\n\t\t\
      \t\t{\n            \t\tvehadded[ic]=mymut.Vehadded[ic];\n            \t\t}\n\
      \n        \t}\n        \telse\n        \t{\n        \tlog(\"mutator preset parts\"\
      );\n        \t}\n\n\t\tif(mymut.bdeploycars || bdeploycars)\n\t\t{\n\t\t\tbdeploycars=true;\n\
      \n\t\t\tif(configvehiclelist.length < mymut.configvehiclelist.length)\n    \
      \     \t{ // reinforce data from client side\n        \t\t configvehiclelist.insert(0,mymut.configvehiclelist.length);\n\
      \n\t\t\t\tfor(ic = 0; ic < mymut.configvehiclelist.Length; ic++)\n\t\t\t\t{\n\
      \            \t\t\tconfigvehiclelist[ic]=mymut.configvehiclelist[ic];\n\n\t\t\
      \t\t}\n\n\t\t\t}\n\n\t\t}\n\t}\n\telse\n\t{\n    log(\"vehicle gun error no\
      \ parts\");\n\t}\n\n\tif((Role < ROLE_Authority) && (vehAdded.length > 0))\n\
      \t\tLoadUpgrades();\n\n}\n\nfunction Checkupgrades()\n{\nlocal int ic;\n\nif\
      \ (myMut == None)\n{\nmymut=class'mutSentaddon'.static.GetsentMutator(Level.Game);\n\
      }\n\n\tif (myMut != None)\n\t{\n\t if(mymut.vehAdded.length > vehadded.length)\n\
      \t {\n        \t if(vehadded.length < mymut.vehAdded.length)\n         \t {\
      \ // reinforce data from client side\n          \t vehadded.insert(0,mymut.vehadded.length);\n\
      \        \t }\n\t\tfor(ic = 0; ic < mymut.vehAdded.Length; ic++)\n\t\t{\n  \
      \      \tvehadded[ic]=mymut.Vehadded[ic];\n        \t}\n\t }\n\tif(mymut.bdeploycars\
      \ || bdeploycars)\n\t{\n\tbdeploycars=true;\n\t}\n\t\t\tif(configvehiclelist.length\
      \ < mymut.configvehiclelist.length)\n         \t\t{ // reinforce data from client\
      \ side\n        \t\t configvehiclelist.insert(0,mymut.configvehiclelist.length);\n\
      \n\t\t\t\tfor(ic = 0; ic < mymut.configvehiclelist.Length; ic++)\n\t\t\t\t{\n\
      \            \t\t\tconfigvehiclelist[ic]=mymut.configvehiclelist[ic];\n\t\t\t\
      \t}\n\t\t\t}\n\n\telse\n\t{\n   \tlog(\"vehicle gun error no parts\");\n\t}\n\
      \n }\n}\nfunction GiveTo(Pawn Other, optional Pickup Pickup)\n{\n\tSuper.GiveTo(Other,\
      \ Pickup);\n\n\tif(Role == ROLE_Authority && Instigator != None && Instigator.Controller.IsA('Bot'))\n\
      \t{\n\t\tNextCheckTime = Level.TimeSeconds + 5; //Never deploy right away.\n\
      \t\tBodgedBot = Bot(Instigator.Controller);\n\t}\n}\nsimulated function onsvehicle\
      \ SentinelInRange(float Range, bool bOnlyOwn, optional bool bAny)\n{\n\tlocal\
      \ Vector HitLocation, HitNormal;\n\tlocal Actor A;\n\tlocal Vector X, Y, Z;\n\
      \n\tlocal bool bSameTeam;\n\n\tGetViewAxes(X, Y, Z);\n\tforeach TraceActors(class'Actor',\
      \ A, HitLocation, HitNormal, Instigator.Location + X * Range, Instigator.Location)\n\
      \t{\n\t\tif(A == None)\n\t\t\tcontinue;\n\n\t\tif(A.bWorldGeometry)\n\t\t\t\
      return None;\n\n\t\tif(A.IsA('onsvehicle'))\n\t\t{\n\t\t\treturn onsvehicle(A);\n\
      \t\t}\n\t}\n\n\treturn None;\n}\n\nsimulated function bool HasAmmo()\n{\n\t\
      return true;\n}\n//Make bots really want this.\n//Bots should never try to wield\
      \ the weapon.\nfunction float GetAIRating()\n{\n\treturn 0;\n}\n// by vaptor\
      \ we destroy the old car and eject the peeps so they don't die\n// then we register\
      \ a new old vehicle with the server\n//Simulated Function RegisterOwner(Onsvehicle\
      \ newvehicle)\n//{\n//}\n//================ ok this is the hard part ===========\
      \ works 100%\nsimulated function setupdriverweapon(onsvehicle upgradervehicle,\
      \ class<onsweapon> newWeapon ,int i)\n{\nlocal name xb; // bone\nlocal bool\
      \ bkilled;\n\nbkilled=false;\n\n\tif(upgradervehicle.Weapons[i] == none && !bkilled)\n\
      \t{\n\tInstigator.ReceiveLocalizedMessage(class'HELMessage', 8);\n\treturn;\
      \ // prevents it from applying to non existant slots\n\t}\n\tif(upgradervehicle.Weapons[i]\
      \ != none && !bkilled)\n\t{\n\tupgradervehicle.Weapons[i].destroy();\n\tbkilled=true;\n\
      \t}\n\t// means there was a weapon that we destroyed\n\tif(bkilled)\n\t{\n\t\
      XB=upgradervehicle.Default.DriverWeapons[i].WeaponBone;\n            // Spawn\
      \ the new Weapon\n            upgradervehicle.Weapons[i] = upgradervehicle.spawn(newweapon,\
      \ upgradervehicle,, upgradervehicle.Location, rot(0,0,0));\n            upgradervehicle.AttachToBone(upgradervehicle.Weapons[i],\
      \ XB);\n        if (!upgradervehicle.Weapons[i].bAimable)\n                upgradervehicle.Weapons[i].CurrentAim\
      \ = rot(0,32768,0);\n        }\n\n    \tif (upgradervehicle.ActiveWeapon < upgradervehicle.Weapons.length)\n\
      \    \t{\n            upgradervehicle.PitchUpLimit = upgradervehicle.Weapons[upgradervehicle.ActiveWeapon].PitchUpLimit;\n\
      \            upgradervehicle.PitchDownLimit = upgradervehicle.Weapons[upgradervehicle.ActiveWeapon].PitchDownLimit;\n\
      \    \t}\n\tupgradervehicle.Weapons[i].team=Instigator.getTeamnum();\n\tupgradervehicle.SetTeamNum(Instigator.getTeamnum());\n\
      \tupgradervehicle.TeamChanged();\n}\n//============== ok driver weapon setup\
      \ is ready now this part gets messy ========\nsimulated function setuppasweapon(onsvehicle\
      \ upgradervehicle, class<onsweapon> newpaswep, int i)\n{\nlocal bool bkilled;\n\
      \nbkilled=false;\n\n\tif(upgradervehicle.WeaponPawns[i] == none && !bkilled)\n\
      \t{\n\tInstigator.ReceiveLocalizedMessage(class'HELMessage', 8);\n\treturn;\
      \ // prevents it from applying to non existant slots\n\t}\n\tif(upgradervehicle.WeaponPawns[i].gun\
      \ != none && !bkilled)\n\t{\n\tupgradervehicle.WeaponPawns[i].gun.destroy();\n\
      \tbkilled=true;\n\t}\n        // Spawn the Passenger Weapons\n            //\
      \ Spawn WeaponPawn\n\tif(bkilled)\n\t{\n            upgradervehicle.WeaponPawns[i].gun\
      \ = upgradervehicle.WeaponPawns[i].spawn(newpaswep,upgradervehicle.WeaponPawns[i],,upgradervehicle.WeaponPawns[i].Location);\n\
      \            upgradervehicle.WeaponPawns[i].AttachToVehicle(upgradervehicle,upgradervehicle.PassengerWeapons[i].WeaponBone);\n\
      \            upgradervehicle.WeaponPawns[i].ObjectiveGetOutDist = upgradervehicle.ObjectiveGetOutDist;\n\
      \t}\n\tupgradervehicle.WeaponPawns[i].gun.team=Instigator.getTeamnum();\n\t\
      upgradervehicle.SetTeamNum(Instigator.getTeamnum());\n\tupgradervehicle.TeamChanged();\n\
      }\n//Change ammo icon do indicate which type of Sentinel may be spawned.\nsimulated\
      \ event WeaponTick(float dt)\n{\n\tlocal int ViewPitch;\n\tlocal class<Ammunition>\
      \ A;\n\n\tViewPitch = Instigator.GetViewRotation().Pitch;\n\n\tif(level.timeseconds\
      \ > nextgain)\n\t{\n\tif(repammo < 4)\n\t\tRepAmmo+=1;\n\n\tnextGain=level.timeseconds+2;\n\
      \t}\n\n\tA = GetAmmoClass(0);\n\n\tif(A != None)\n\t{\n\t\tif(ViewPitch > 1124\
      \ && ViewPitch < 31744)\n\t\t{\n\t\t\tA.Default.IconMaterial=Finalblend'ammoslothel';\n\
      \t\t\tA.Default.IconCoords.X1 = 32;\n\t\t\tA.Default.IconCoords.Y1 = 32;\n\t\
      \t\tA.Default.IconCoords.X2 = 96;\n\t\t\tA.Default.IconCoords.Y2 = 96;\n\t\t\
      }\n                else\n\t\t{\n\t\t\tA.Default.IconMaterial=FinalBlend'ammoslotsentNO';\n\
      \t\t\tA.Default.IconCoords.X1 = 0;\n\t\t\tA.Default.IconCoords.y1 = 0;\n\t\t\
      \tA.Default.IconCoords.x2 = 64;\n\t\t\tA.Default.IconCoords.y2 = 64;\n\t\t}\n\
      \t}\n\n}\nsimulated function PostnetBeginPlay()\n{\n\tSuper.PostBeginPlay();\n\
      \n\tif(Role == ROLE_Authority)\n\t\tLoadUpgrades();\n}\nsimulated Function Loadupgrades()\n\
      {\nlocal int ic;\n          if(vehadded.length > driverUpgradeClasses.length)\n\
      \         { // reinforce data from client side\n         driverUpgradeClasses.insert(0,vehadded.length);\n\
      \t\t\tfor(ic = 0; ic < vehAdded.Length; ic++)\n\t\t\t{\n            \t\tAddToUpgradeList(ic,vehadded[ic]);\n\
      \            \t\t}\n        }\n}\nsimulated function DoUpgrade( int i, optional\
      \ class<onsweapon> driveUpgrade, optional class<onsweapon> pasUpgrade)\n{\n\
      local onsvehicle SentinelToUpgrade;\n\tif(!bAllowUpgrades)\n\t{\n\t\twarn(\"\
      Tried to add an upgrade but they are disabled.\");\n\t\treturn;\n\t}\n\tif(DriveUpgrade\
      \ == None && pasupgrade == none)\n\t{\n\t\twarn(\"Tried to add an upgrade that\
      \ doesn't exist.\");\n\t\treturn;\n\t}\n\tSentinelToUpgrade = SentinelInRange(class'mechFire'.Default.UpgradeRange,\
      \ true);\n\tif(SentinelToUpgrade == None)\n\t{\n\t\tInstigator.ReceiveLocalizedMessage(class'HELMessage',\
      \ 9);\n\t\treturn;\n\t}\n\tif(AmmoAmount(0) < 20)\n\t{\n\t\tInstigator.ReceiveLocalizedMessage(class'HELMessage',\
      \ 8);\n\t\treturn;\n\t}\n\tif(driveupgrade == class'onslinkableweapon' || pasupgrade\
      \ == class'onslinkableweapon' )\n\t{\n\treturn;\n\t}\n\n\tif(driveupgrade !=\
      \ none)\n\t{\n\t\tif(AmmoAmount(0) > 20)\n\t\t{\n\t\tsetupdriverweapon(SentinelToUpgrade,driveUpgrade,I);\n\
      \t\tConsumeAmmo(0,20);\n\t\t}\n\t}\n\telse\n\t{\n\t    if(AmmoAmount(0) > 20)\n\
      \t\t{\n\t\tsetuppasweapon(SentinelToUpgrade,pasUpgrade,I);\n\t\tConsumeAmmo(0,20);\n\
      \t\t}\n\t}\n}\nfunction Tick(float DeltaTime)\n{\n\tlocal name BotState, BotOrders;\n\
      \n\tif(Level.TimeSeconds >= UpgradeCheckTime)\n\t{\n\t\tUpgradeCheckTime = Level.TimeSeconds\
      \ + 1;\n\t\tmechFire(FireMode[0]).DoStuffe();\n\t}\n\tif(BodgedBot == None ||\
      \ Level.Game.bGameEnded)\n\t\treturn;\n\tif(Level.TimeSeconds >= NextCheckTime\
      \ && VSize(Instigator.Velocity) < 1)\n\t{\n\tNextCheckTime = Level.TimeSeconds\
      \ + 1;\n\t}\n}\nsimulated Function DeployCar(class<onsvehicle> Type, int RequiredAmmo\
      \ )\n{\nlocal int AmmoConsume;\nlocal int zx;\nlocal Vector X, Y, Z;\nlocal\
      \ Vector DeployLocation;\n\nif ( !Level.Game.bAllowVehicles)\n{\nLevel.Game.bAllowVehicles=true;\
      \ \n}\n\nGetViewAxes(X, Y, Z);\nif(requiredammo > 200)\n{\nrequiredammo=150;\n\
      }\nif(killscan(type.default.CollisionRadius) && AmmoAmount(0) >= RequiredAmmo)\n\
      {\n\n IF(oldVehicle != none)\n {\n\tif(oldvehicle.Driver != none)\n\t{\n\toldVehicle.EjectDriver();\n\
      \n\t\tif(oldvehicle.weaponpawns.length > 0)\n\t\t{\n\t\t\tfor (zx = 0; zx <\
      \ oldvehicle.WeaponPawns.length; zx++)\n\t\t\t{\n\t\t\toldvehicle.WeaponPawns[zx].EjectDriver();\n\
      \t\t\toldvehicle.WeaponPawns[zx].Died(None, class'DamageType', oldvehicle.Location);\n\
      \t\t\t}\n\t\toldvehicle.WeaponPawns.length = 0;\n\t\t}\n\n\toldvehicle.Died(None,\
      \ class'DamageType', oldvehicle.Location);\n\toldVehicle=none;\n\t}\n\n }\n\n\
      \ if(oldvehicle == none)//seems to work but won't spawn\n {\n DeployLocation\
      \ = Instigator.Location + (X * (20.0 + type.default.CollisionRadius)) + (z *\
      \ type.default.collisionheight);\n OldVehicle= Spawn(type,,, DeployLocation,\
      \ rot(0, -16384, 0));\n ConsumeAmmo(0,RequiredAmmo);\n }\n}\n}\n\nsimulated\
      \ function NewDrawWeaponInfo(Canvas Canvas, float YPos)\n{\n\tlocal PlayerController\
      \ PC;\n\n\tPC = PlayerController(Instigator.Controller);\n\n\tif(PC == None)\n\
      \t\treturn;\n\n\tHudBase(PC.myHUD).TargetMaterial = finalblend'Targetcores';\n\
      \n\tHudBase(PC.myHUD).TargetMaterial = HudBase(PC.myHUD).Default.TargetMaterial;\n\
      }\n//=============================================================================\n\
      // Utility functions:\n//=============================================================================\n\
      //Upgrades are replicated to clients here.\nsimulated function AddToUpgradeList(int\
      \ i, class<onsweapon> NextDriverClass)\n{\n\tif(nextDriverClass != none)\n\t\
      \tdriverUpgradeClasses[i] = NextDriverClass; // found a way to make it only\
      \ need this data!\n}\nstatic function int GetCost(class<onsvehicle> vehiclewanted,int\
      \ total)\n{\nlocal int totalother;\nlocal float divspd;\n\n// use percentage\
      \ logic crud this may be too much math\nif(vehiclewanted != none)\n{\ntotalother=vehiclewanted.default.GroundSpeed\
      \ + vehiclewanted.default.airSpeed + vehiclewanted.default.mass + vehiclewanted.default.health;\n\
      }\ndivspd=total/200; // use to subtract from other values\n//log(total);\nreturn(totalother/divspd);\n\
      }\nsimulated function BringUp(optional Weapon PrevWeapon)\n{\n    Super.BringUp(PrevWeapon);\n\
      }\nsimulated function bool PutDown()\n{\n    if ( Super.PutDown() )\n    {\n\
      \t\tGotoState('');\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction bool\
      \ killscan(int radu) // new code for telefragchecking by vaptor\n{\nlocal vector\
      \ checklocation,scy;\nlocal Vector X, Y, Z, HitLocation, HitNormal;\nlocal actor\
      \ victimizedactor;\n\n\tGetViewAxes(X, Y, Z);\n\n\tcheckLocation = Instigator.Location\
      \ + X * 100;\n\tscy.x=radu;\n\tscy.y=radu;\n\tscy.z=16;\n\tVictimizedactor =\
      \ Trace(HitLocation, HitNormal, checkLocation, Instigator.Location , true, scy);\n\
      \n\t // set it false first\n\n\tif(victimizedActor != none)\n\t{\n\t if(victimizedActor.isa('Pawn'))\n\
      \t {\n\t\tif(pawn(victimizedActor) != none)\n\t\t{\n\t\t\tif(pawn(victimizedActor).Controller.SameTeamAs(Instigator.Controller)\
      \ ) // confirmed! stop them now!\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\
      \t\telse\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\
      \t\treturn true;\n\t\t}\n\n\t }\n\n\t}\n\treturn true;\n}\ndefaultproperties\n\
      {\n     bAllowUpgrades=True\n     upgraderange=1200.000000\n     FireModeClass(0)=Class'sentsv12.mechFire'\n\
      \     FireModeClass(1)=Class'sentsv12.mechlaunchFire'\n     IdleAnim=\"Idle\"\
      \n     SelectAnim=\"Select\"\n     SelectSound=Sound'WeaponSounds.Misc.shieldgun_change'\n\
      \     SelectForce=\"ShieldGun_change\"\n     AIRating=1.500000\n     CurrentRating=1.500000\n\
      \     Description=\"NEW weapon technology useing thinking machines to provide\
      \ general support for soldiers\"\n     EffectOffset=(X=70.000000,Y=10.000000)\n\
      \     SmallViewOffset=(X=23.000000,Y=6.000000,Z=-6.000000)\n     CenteredOffsetY=-5.000000\n\
      \     CenteredRoll=5000\n     CenteredYaw=-300\n     CustomCrosshair=31\n  \
      \   CustomCrossHairColor=(G=0,R=0)\n     CustomCrossHairTextureName=\"AS_FX_TX.Icons.OBJ_Destroy_Tex\"\
      \n     InventoryGroup=8\n     GroupOffset=158\n     PlayerViewOffset=(X=11.000000)\n\
      \     BobDamping=1.575000\n     AttachmentClass=Class'sentsv12.mechAttach'\n\
      \     IconMaterial=FinalBlend'AS_FX_TX.Icons.OBJ_HellBender_FB'\n     IconCoords=(X2=64,Y2=64)\n\
      \     ItemName=\"VehicleMechanic\"\n     Mesh=SkeletalMesh'Weapons.BallLauncher_1st'\n\
      \     DrawScale=0.400000\n     Skins(0)=Combiner'sentsv12.Beams.ANGLETRAILxx'\n\
      \     Skins(1)=FinalBlend'sentsv12.Beams.casedvortex'\n     Skins(2)=Shader'sentsv12.Beams.coilshader'\n\
      }\n\n</uscript></div></div>\n\n[[:Category:Legacy Custom Class (UT2004)]]\n\n\
      [[:Category:Legacy To Do]] what is this? the parent class doesn't show up on\
      \ wiki.  Delete it?\n[[Category:Legacy Custom Class (UT2004)|{{PAGENAME}}]]\n\
      [[Category:Legacy To Do|{{PAGENAME}}]]"
  properties: []
  revId: 9333
name: "Legacy:Vehicle Weapon Changer Gun"
revision:
  revid: 9333
  parentid: 9334
  user: "Sweavo"
  timestamp: 1195512412.000000000
  comment: "*"
timestamp: 1668787354.024386000
