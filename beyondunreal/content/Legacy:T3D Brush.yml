---
parse:
  title: "Legacy:T3D Brush"
  text:
    text: "<p>A T3D Brush is geometry information contained into <a rel=\"nofollow\"\
      \ class=\"external text\" href=\"http://wiki.beyondunreal.com/Legacy:T3D_File\"\
      >[T3D Files</a>].</p>\n<p>The following actors used as brushes in T3D files:</p>\n\
      <ul>\n<li><a rel=\"nofollow\" class=\"external text\" href=\"http://wiki.beyondunreal.com/Legacy:Brush\"\
      >[Brushes</a>]</li>\n<li><a rel=\"nofollow\" class=\"external text\" href=\"\
      http://wiki.beyondunreal.com/Legacy:Mover\">[Movers</a>] (only in Unreal 1 and\
      \ Unreal Tournament)</li>\n</ul>\n<p></p>\n<div id=\"toc\" class=\"toc\">\n\
      <div id=\"toctitle\">\n<h2>Contents</h2>\n</div>\n<ul>\n<li class=\"toclevel-1\
      \ tocsection-1\"><a href=\"#Actor_structure\"><span class=\"tocnumber\">1</span>\
      \ <span class=\"toctext\">Actor structure</span></a></li>\n<li class=\"toclevel-1\
      \ tocsection-2\"><a href=\"#Loading_T3D_brush_geometry\"><span class=\"tocnumber\"\
      >2</span> <span class=\"toctext\">Loading T3D brush geometry</span></a></li>\n\
      <li class=\"toclevel-1 tocsection-3\"><a href=\"#Scaling_up.2Fdown_brushes\"\
      ><span class=\"tocnumber\">3</span> <span class=\"toctext\">Scaling up/down\
      \ brushes</span></a></li>\n<li class=\"toclevel-1 tocsection-4\"><a href=\"\
      #Tools\"><span class=\"tocnumber\">4</span> <span class=\"toctext\">Tools</span></a></li>\n\
      </ul>\n</div>\n<p></p>\n<h3><span class=\"mw-headline\" id=\"Actor_structure\"\
      >Actor structure</span><span class=\"mw-editsection\"><span class=\"mw-editsection-bracket\"\
      >[</span><a href=\"/edit/Legacy:T3D_Brush?section=1\" title=\"Edit section:\
      \ Actor structure\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h3>\n\
      <div dir=\"ltr\" class=\"mw-geshi mw-code mw-content-ltr\">\n<div class=\"uscript\
      \ source-uscript\">\n<pre class=\"de1\"><span class=\"kw2\">Begin</span> <span\
      \ class=\"kw9\">Actor</span> <span class=\"kw1\">Class</span><span class=\"\
      sy0\">=</span>Brush <span class=\"kw5\">Name</span><span class=\"sy0\">=</span>Brush0\n\
      \    MainScale<span class=\"sy0\">=</span><span class=\"br0\">(</span>SheerAxis<span\
      \ class=\"sy0\">=</span>SHEER_ZX<span class=\"br0\">)</span>\n    PostScale<span\
      \ class=\"sy0\">=</span><span class=\"br0\">(</span><span class=\"kw5\">Scale</span><span\
      \ class=\"sy0\">=</span><span class=\"br0\">(</span>X<span class=\"sy0\">=</span><span\
      \ class=\"nu0\">0.250000</span>,Y<span class=\"sy0\">=</span><span class=\"\
      nu0\">8.000000</span>,Z<span class=\"sy0\">=</span><span class=\"nu0\">3.000000</span><span\
      \ class=\"br0\">)</span>,SheerAxis<span class=\"sy0\">=</span>SHEER_ZX<span\
      \ class=\"br0\">)</span>\n    TempScale<span class=\"sy0\">=</span><span class=\"\
      br0\">(</span><span class=\"kw5\">Scale</span><span class=\"sy0\">=</span><span\
      \ class=\"br0\">(</span>X<span class=\"sy0\">=</span><span class=\"nu0\">0.250000</span>,Y<span\
      \ class=\"sy0\">=</span><span class=\"nu0\">8.000000</span>,Z<span class=\"\
      sy0\">=</span><span class=\"nu0\">3.000000</span><span class=\"br0\">)</span>,SheerAxis<span\
      \ class=\"sy0\">=</span>SHEER_ZX<span class=\"br0\">)</span>\n    <span class=\"\
      kw7\">Level</span><span class=\"sy0\">=</span>LevelInfo<span class=\"st0\">'Entry.LevelInfo0'</span>\n\
      \    <span class=\"kw7\">Tag</span><span class=\"sy0\">=</span>Brush\n    Region<span\
      \ class=\"sy0\">=</span><span class=\"br0\">(</span>Zone<span class=\"sy0\"\
      >=</span>ZoneInfo<span class=\"st0\">'Entry.ZoneInfo0'</span>,iLeaf<span class=\"\
      sy0\">=</span><span class=\"nu0\">1</span>,ZoneNumber<span class=\"sy0\">=</span><span\
      \ class=\"nu0\">1</span><span class=\"br0\">)</span>\n    <span class=\"kw7\"\
      >Location</span><span class=\"sy0\">=</span><span class=\"br0\">(</span>X<span\
      \ class=\"sy0\">=</span><span class=\"nu0\">464.000000</span>,Y<span class=\"\
      sy0\">=-</span><span class=\"nu0\">16.000000</span>,Z<span class=\"sy0\">=</span><span\
      \ class=\"nu0\">64.000000</span><span class=\"br0\">)</span>\n    <span class=\"\
      kw7\">Rotation</span><span class=\"sy0\">=</span><span class=\"br0\">(</span>Yaw<span\
      \ class=\"sy0\">=</span><span class=\"nu0\">49152</span><span class=\"br0\"\
      >)</span>\n    <span class=\"kw2\">Begin</span> Brush <span class=\"kw5\">Name</span><span\
      \ class=\"sy0\">=</span>Brush\n       <span class=\"kw2\">Begin</span> PolyList\n\
      \          <span class=\"kw2\">Begin</span> Polygon Item<span class=\"sy0\"\
      >=</span>OUTSIDE <span class=\"kw5\">Texture</span><span class=\"sy0\">=</span>black1\
      \ Flags<span class=\"sy0\">=</span><span class=\"nu0\">4194304</span> Link<span\
      \ class=\"sy0\">=</span><span class=\"nu0\">0</span>\n             Origin  \
      \ <span class=\"sy0\">-</span><span class=\"nu0\">00160.000000</span>,<span\
      \ class=\"sy0\">+</span><span class=\"nu0\">00000.000000</span>,<span class=\"\
      sy0\">+</span><span class=\"nu0\">00128.000000</span>\n             <span class=\"\
      kw3\">Normal</span>   <span class=\"sy0\">+</span><span class=\"nu0\">00000.000000</span>,<span\
      \ class=\"sy0\">+</span><span class=\"nu0\">00000.000000</span>,<span class=\"\
      sy0\">+</span><span class=\"nu0\">00001.000000</span>\n             TextureU\
      \ <span class=\"sy0\">+</span><span class=\"nu0\">00004.000000</span>,<span\
      \ class=\"sy0\">+</span><span class=\"nu0\">00000.000000</span>,<span class=\"\
      sy0\">+</span><span class=\"nu0\">00000.000000</span>\n             TextureV\
      \ <span class=\"sy0\">+</span><span class=\"nu0\">00000.000000</span>,<span\
      \ class=\"sy0\">+</span><span class=\"nu0\">00004.000000</span>,<span class=\"\
      sy0\">+</span><span class=\"nu0\">00000.000000</span>\n             Vertex \
      \  <span class=\"sy0\">-</span><span class=\"nu0\">00128.000000</span>,<span\
      \ class=\"sy0\">-</span><span class=\"nu0\">00128.000000</span>,<span class=\"\
      sy0\">+</span><span class=\"nu0\">00128.000000</span>\n             Vertex \
      \  <span class=\"sy0\">+</span><span class=\"nu0\">00128.000000</span>,<span\
      \ class=\"sy0\">-</span><span class=\"nu0\">00128.000000</span>,<span class=\"\
      sy0\">+</span><span class=\"nu0\">00128.000000</span>\n             Vertex \
      \  <span class=\"sy0\">+</span><span class=\"nu0\">00128.000000</span>,<span\
      \ class=\"sy0\">+</span><span class=\"nu0\">00128.000000</span>,<span class=\"\
      sy0\">+</span><span class=\"nu0\">00128.000000</span>\n             Vertex \
      \  <span class=\"sy0\">-</span><span class=\"nu0\">00128.000000</span>,<span\
      \ class=\"sy0\">+</span><span class=\"nu0\">00128.000000</span>,<span class=\"\
      sy0\">+</span><span class=\"nu0\">00128.000000</span>\n          End Polygon\n\
      \          ...\n       <span class=\"me0\">End</span> PolyList\n    End Brush\n\
      \    Brush<span class=\"sy0\">=</span>Model<span class=\"st0\">'Entry.Brush'</span>\n\
      \    <span class=\"kw5\">Name</span><span class=\"sy0\">=</span>Brush0\nEnd\
      \ <span class=\"kw9\">Actor</span></pre></div>\n</div>\n<ul>\n<li>MainScale:\
      \ scales up or down current brush before make it rotate.</li>\n<li>PostScale:\
      \ scales up or down current brush after make it rotate.</li>\n<li>TempScale:\
      \ unknown effect</li>\n<li>Location: where the brush is located in the map</li>\n\
      <li>Rotation: contains up to 3 values\n<ul>\n<li>Roll: X axis rotation</li>\n\
      <li>Pitch: Y axis rotation</li>\n<li>Yaw: Z axis rotation</li>\n</ul>\n</li>\n\
      <li>Begin Polygon Item=OUTSIDE Texture=black1 Flags=4194304 Link=0\n<ul>\n<li>Texture:\
      \ texture applied to the current polygon with formatted string.\n<ul>\n<li>[TextureName]\
      \ for Unreal 1 / Unreal Tournament maps</li>\n<li>[PackageName.TextureName]\
      \ for other UTx games.</li>\n</ul>\n</li>\n<li>Origin: where the texture is\
      \ centered</li>\n<li>Normal: normally, the perpendicular vector of the surface\
      \ where the texture is applied</li>\n<li>Texture U,V: contains information about\
      \ scaling and texture rotation</li>\n<li>PanU,PanV: only used in Unreal Tournament\
      \ and Unreal 1. Changes the texture origin coordinates.</li>\n<li>Vertex: X,Y,Z\
      \ coordinates of the specified vertex</li>\n</ul>\n</li>\n</ul>\n<p>Note: NumTriangles\
      \ = NumVertices-Floor(NumVertices/3)</p>\n<p><a href=\"/File:Texinfot3d.jpg\"\
      \ class=\"image\"><img alt=\"Texinfot3d.jpg\" src=\"/w/images/Texinfot3d.jpg\"\
      \ width=\"1386\" height=\"695\" /></a></p>\n<h3><span class=\"mw-headline\"\
      \ id=\"Loading_T3D_brush_geometry\">Loading T3D brush geometry</span><span class=\"\
      mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a href=\"/edit/Legacy:T3D_Brush?section=2\"\
      \ title=\"Edit section: Loading T3D brush geometry\">edit</a><span class=\"\
      mw-editsection-bracket\">]</span></span></h3>\n<p>You must parse those informations\
      \ correctly: PrePivot, Location, Rotation, MainScale, PostScale, TempScale,\
      \ Polygon / Vertexes</p>\n<div dir=\"ltr\" class=\"mw-geshi mw-code mw-content-ltr\"\
      >\n<div class=\"uscript source-uscript\">\n<pre class=\"de1\"><span class=\"\
      kw2\">FOR</span> each vertex of each polygon of parsed brush <span class=\"\
      kw2\">DO</span>:\n   <span class=\"kw2\">do</span> MainScale ... <span class=\"\
      me0\">x</span> <span class=\"sy0\">*=</span> MainScale<span class=\"br0\">[</span>x<span\
      \ class=\"br0\">]</span>, y <span class=\"sy0\">*=</span> MainScale<span class=\"\
      br0\">[</span>y<span class=\"br0\">]</span>, z <span class=\"sy0\">*=</span>\
      \ MainScale<span class=\"br0\">[</span>z<span class=\"br0\">]</span>\n   <span\
      \ class=\"kw2\">do</span> translation <span class=\"br0\">(</span><span class=\"\
      sy0\">-</span>PrePivot<span class=\"br0\">[</span>x<span class=\"br0\">]</span>,\
      \ <span class=\"sy0\">-</span>PrePivot<span class=\"br0\">[</span>y<span class=\"\
      br0\">]</span>, <span class=\"sy0\">-</span>PrePivot<span class=\"br0\">[</span>z<span\
      \ class=\"br0\">]</span><span class=\"br0\">)</span>\n   <span class=\"kw2\"\
      >do</span> <span class=\"kw7\">rotation</span> Yaw, Pitch, Roll\n   <span class=\"\
      kw2\">do</span> PostScale ... <span class=\"me0\">x</span> <span class=\"sy0\"\
      >*=</span> PostScale<span class=\"br0\">[</span>x<span class=\"br0\">]</span>,\
      \ y <span class=\"sy0\">*=</span> PostScale<span class=\"br0\">[</span>y<span\
      \ class=\"br0\">]</span>, z <span class=\"sy0\">*=</span> PostScale<span class=\"\
      br0\">[</span>z<span class=\"br0\">]</span>\n   <span class=\"kw2\">do</span>\
      \ TempScale ... <span class=\"me0\">x</span> <span class=\"sy0\">*=</span> TempScale<span\
      \ class=\"br0\">[</span>x<span class=\"br0\">]</span>, y <span class=\"sy0\"\
      >*=</span> TempScale<span class=\"br0\">[</span>y<span class=\"br0\">]</span>,\
      \ z <span class=\"sy0\">*=</span> TempScale<span class=\"br0\">[</span>z<span\
      \ class=\"br0\">]</span>\n   <span class=\"kw2\">do</span> translation <span\
      \ class=\"br0\">(</span><span class=\"kw7\">Location</span><span class=\"br0\"\
      >[</span>x<span class=\"br0\">]</span>, <span class=\"kw7\">Location</span><span\
      \ class=\"br0\">[</span>y<span class=\"br0\">]</span>, <span class=\"kw7\">Location</span><span\
      \ class=\"br0\">[</span>z<span class=\"br0\">]</span><span class=\"br0\">)</span>\n\
      ENDFOR</pre></div>\n</div>\n<p>Note: For Unreal Engine 3.x based maps (Unreal\
      \ Tournament 2004 and 2003),PostScale,MainScale,TempScale and Rotation values\
      \ are always null as the editor automatically updates vertices,origin and normal\
      \ values when scaling up/down or rotating a brush.</p>\n<p><br />\nRotation\
      \ matrix are the following:</p>\n<div dir=\"ltr\" class=\"mw-geshi mw-code mw-content-ltr\"\
      >\n<div class=\"uscript source-uscript\">\n<pre class=\"de1\">Roll Matrix<span\
      \ class=\"sy0\">-</span>X Axis:\n<span class=\"nu0\">1</span>, <span class=\"\
      nu0\">0</span>, <span class=\"nu0\">0</span>, <span class=\"nu0\">0</span>,\n\
      <span class=\"nu0\">0</span>, <span class=\"kw3\">cos</span><span class=\"br0\"\
      >(</span>roll<span class=\"br0\">)</span>,<span class=\"sy0\">-</span><span\
      \ class=\"kw3\">sin</span><span class=\"br0\">(</span>roll<span class=\"br0\"\
      >)</span>, <span class=\"nu0\">0</span>,\n<span class=\"nu0\">0</span>, <span\
      \ class=\"kw3\">sin</span><span class=\"br0\">(</span>roll<span class=\"br0\"\
      >)</span>,<span class=\"kw3\">cos</span><span class=\"br0\">(</span>roll<span\
      \ class=\"br0\">)</span>, <span class=\"nu0\">0</span>,\n<span class=\"nu0\"\
      >0</span>, <span class=\"nu0\">0</span>, <span class=\"nu0\">0</span>, <span\
      \ class=\"nu0\">1</span></pre></div>\n</div>\n<div dir=\"ltr\" class=\"mw-geshi\
      \ mw-code mw-content-ltr\">\n<div class=\"uscript source-uscript\">\n<pre class=\"\
      de1\">Pitch Matrix<span class=\"sy0\">-</span>Y Axis:\n<span class=\"kw3\">cos</span><span\
      \ class=\"br0\">(</span>pitch<span class=\"br0\">)</span>, <span class=\"nu0\"\
      >0</span>, <span class=\"kw3\">sin</span><span class=\"br0\">(</span>pitch<span\
      \ class=\"br0\">)</span>, <span class=\"nu0\">0</span>,\n<span class=\"nu0\"\
      >0</span>, <span class=\"nu0\">1</span>, <span class=\"nu0\">0</span>, <span\
      \ class=\"nu0\">0</span>,\n<span class=\"sy0\">-</span><span class=\"kw3\">sin</span><span\
      \ class=\"br0\">(</span>pitch<span class=\"br0\">)</span>, <span class=\"nu0\"\
      >0</span>,<span class=\"kw3\">cos</span><span class=\"br0\">(</span>pitch<span\
      \ class=\"br0\">)</span>, <span class=\"nu0\">0</span>,\n<span class=\"nu0\"\
      >0</span>, <span class=\"nu0\">0</span>, <span class=\"nu0\">0</span>, <span\
      \ class=\"nu0\">1</span><span class=\"br0\">)</span></pre></div>\n</div>\n<div\
      \ dir=\"ltr\" class=\"mw-geshi mw-code mw-content-ltr\">\n<div class=\"uscript\
      \ source-uscript\">\n<pre class=\"de1\">Yaw Matrix<span class=\"sy0\">-</span>Z\
      \ Axis:\n<span class=\"kw3\">cos</span><span class=\"br0\">(</span>yaw<span\
      \ class=\"br0\">)</span>, <span class=\"kw3\">sin</span><span class=\"br0\"\
      >(</span>yaw<span class=\"br0\">)</span>, <span class=\"nu0\">0</span>, <span\
      \ class=\"nu0\">0</span>,\n<span class=\"sy0\">-</span><span class=\"kw3\">sin</span><span\
      \ class=\"br0\">(</span>yaw<span class=\"br0\">)</span>, <span class=\"kw3\"\
      >cos</span><span class=\"br0\">(</span>yaw<span class=\"br0\">)</span>, <span\
      \ class=\"nu0\">0</span>, <span class=\"nu0\">0</span>,\n<span class=\"nu0\"\
      >0</span>, <span class=\"nu0\">0</span>, <span class=\"nu0\">1</span>, <span\
      \ class=\"nu0\">0</span>,\n<span class=\"nu0\">0</span>, <span class=\"nu0\"\
      >0</span>, <span class=\"nu0\">0</span>, <span class=\"nu0\">1</span></pre></div>\n\
      </div>\n<div dir=\"ltr\" class=\"mw-geshi mw-code mw-content-ltr\">\n<div class=\"\
      uscript source-uscript\">\n<pre class=\"de1\">Global <span class=\"kw7\">Rotation</span>\
      \ <span class=\"kw5\">Matrix</span><span class=\"sy0\">=</span><span class=\"\
      br0\">(</span>Roll <span class=\"kw5\">Matrix</span><span class=\"br0\">)</span><span\
      \ class=\"sy0\">*</span><span class=\"br0\">(</span>Pitch <span class=\"kw5\"\
      >Matrix</span><span class=\"br0\">)</span><span class=\"sy0\">*</span><span\
      \ class=\"br0\">(</span>Yaw <span class=\"kw5\">Matrix</span><span class=\"\
      br0\">)</span></pre></div>\n</div>\n<p>Yaw, Roll and Pitch values are in radians.\
      \ Original values from t3d files are in \"Unreal format\" where 2 pi rads =\
      \ 65536. For more information about Yaw, Pitch, Roll rotation matrix see <a\
      \ rel=\"nofollow\" class=\"external free\" href=\"http://mathworld.wolfram.com/EulerAngles.html\"\
      >http://mathworld.wolfram.com/EulerAngles.html</a>.</p>\n<h3><span class=\"\
      mw-headline\" id=\"Scaling_up.2Fdown_brushes\">Scaling up/down brushes</span><span\
      \ class=\"mw-editsection\"><span class=\"mw-editsection-bracket\">[</span><a\
      \ href=\"/edit/Legacy:T3D_Brush?section=3\" title=\"Edit section: Scaling up/down\
      \ brushes\">edit</a><span class=\"mw-editsection-bracket\">]</span></span></h3>\n\
      <p>This operation is mainly needed when you want to port Unreal 1 or Unreal\
      \ Tournament map to Unreal Tournament 2004 or Unreal Tournament 3.</p>\n<p>To\
      \ do so,considering ScaleFactor:</p>\n<div dir=\"ltr\" class=\"mw-geshi mw-code\
      \ mw-content-ltr\">\n<div class=\"uscript source-uscript\">\n<pre class=\"de1\"\
      >set <span class=\"kw7\">Location</span> <span class=\"sy0\">=</span> ScaleFactor<span\
      \ class=\"sy0\">*</span><span class=\"kw7\">Location</span>\nset PrePivot <span\
      \ class=\"sy0\">=</span> ScaleFactor<span class=\"sy0\">*</span>PrePivot\n<span\
      \ class=\"kw2\">For</span> each polygon\n    set Origin <span class=\"sy0\"\
      >=</span> ScaleFactor<span class=\"sy0\">*</span>Origin\n    <span class=\"\
      kw2\">For</span> each vertex\n      set Vertex <span class=\"sy0\">=</span>\
      \ ScaleFactor<span class=\"sy0\">*</span>Vertex</pre></div>\n</div>\n<p>Usually\
      \ scale factor values: Unreal 1/Unreal Tournament to UT2003/UT2004/UT3: 1.25</p>\n\
      <h3><span class=\"mw-headline\" id=\"Tools\">Tools</span><span class=\"mw-editsection\"\
      ><span class=\"mw-editsection-bracket\">[</span><a href=\"/edit/Legacy:T3D_Brush?section=4\"\
      \ title=\"Edit section: Tools\">edit</a><span class=\"mw-editsection-bracket\"\
      >]</span></span></h3>\n<ul>\n<li>[TODO Fix Broken Link] Python T3D loader (doesn't\
      \ care about texture informations): <a rel=\"nofollow\" class=\"external free\"\
      \ href=\"http://carolina.mff.cuni.cz/~gib/ut_utils/unreal_t3d_loader.zip\">http://carolina.mff.cuni.cz/~gib/ut_utils/unreal_t3d_loader.zip</a>\
      \ see readme.txt in zip file</li>\n<li><a href=\"/Legacy:MapScale\" title=\"\
      Legacy:MapScale\">MapScale</a> scales an entire .t3d file (only works for UT/U1\
      \ maps)</li>\n</ul>\n\n<!-- \nNewPP limit report\nCPU time usage: 0.179 seconds\n\
      Real time usage: 0.183 seconds\nPreprocessor visited node count: 78/1000000\n\
      Preprocessor generated node count: 160/1000000\nPost‐expand include size: 0/2097152\
      \ bytes\nTemplate argument size: 0/2097152 bytes\nHighest expansion depth: 2/40\n\
      Expensive parser function count: 0/100\n-->\n\n<!-- \nTransclusion expansion\
      \ time report (%,ms,calls,template)\n100.00%    0.000      1 - -total\n-->\n\
      \n<!-- Saved in parser cache with key wiki:pcache:idhash:24077-0!*!0!!en!5!*\
      \ and timestamp 20221118092911 and revision id 40358\n -->\n"
  categories: []
  links:
  - ns: 100
    exists: true
    name: "Legacy:MapScale"
  templates: []
  images:
  - "Texinfot3d.jpg"
  externallinks:
  - "http://wiki.beyondunreal.com/Legacy:Mover"
  - "http://wiki.beyondunreal.com/Legacy:Brush"
  - "http://wiki.beyondunreal.com/Legacy:T3D_File"
  - "http://mathworld.wolfram.com/EulerAngles.html"
  - "http://carolina.mff.cuni.cz/~gib/ut_utils/unreal_t3d_loader.zip"
  sections:
  - toclevel: 1
    level: "3"
    line: "Actor structure"
    number: "1"
    index: "1"
    fromtitle: "Legacy:T3D_Brush"
    byteoffset: 311
    anchor: "Actor_structure"
  - toclevel: 1
    level: "3"
    line: "Loading T3D brush geometry"
    number: "2"
    index: "2"
    fromtitle: "Legacy:T3D_Brush"
    byteoffset: 2522
    anchor: "Loading_T3D_brush_geometry"
  - toclevel: 1
    level: "3"
    line: "Scaling up/down brushes"
    number: "3"
    index: "3"
    fromtitle: "Legacy:T3D_Brush"
    byteoffset: 4110
    anchor: "Scaling_up.2Fdown_brushes"
  - toclevel: 1
    level: "3"
    line: "Tools"
    number: "4"
    index: "4"
    fromtitle: "Legacy:T3D_Brush"
    byteoffset: 4604
    anchor: "Tools"
  displaytitle: "Legacy:T3D Brush"
  iwlinks: []
  wikitext:
    text: "A T3D Brush is geometry information contained into [http://wiki.beyondunreal.com/Legacy:T3D_File[T3D\
      \ Files]].\n\nThe following actors used as brushes in T3D files:\n*[http://wiki.beyondunreal.com/Legacy:Brush[Brushes]]\n\
      *[http://wiki.beyondunreal.com/Legacy:Mover[Movers]] (only in Unreal 1 and Unreal\
      \ Tournament)\n\n=== Actor structure ===\n<uscript>Begin Actor Class=Brush Name=Brush0\n\
      \    MainScale=(SheerAxis=SHEER_ZX)\n    PostScale=(Scale=(X=0.250000,Y=8.000000,Z=3.000000),SheerAxis=SHEER_ZX)\n\
      \    TempScale=(Scale=(X=0.250000,Y=8.000000,Z=3.000000),SheerAxis=SHEER_ZX)\n\
      \    Level=LevelInfo'Entry.LevelInfo0'\n    Tag=Brush\n    Region=(Zone=ZoneInfo'Entry.ZoneInfo0',iLeaf=1,ZoneNumber=1)\n\
      \    Location=(X=464.000000,Y=-16.000000,Z=64.000000)\n    Rotation=(Yaw=49152)\n\
      \    Begin Brush Name=Brush\n       Begin PolyList\n          Begin Polygon\
      \ Item=OUTSIDE Texture=black1 Flags=4194304 Link=0\n             Origin   -00160.000000,+00000.000000,+00128.000000\n\
      \             Normal   +00000.000000,+00000.000000,+00001.000000\n         \
      \    TextureU +00004.000000,+00000.000000,+00000.000000\n             TextureV\
      \ +00000.000000,+00004.000000,+00000.000000\n             Vertex   -00128.000000,-00128.000000,+00128.000000\n\
      \             Vertex   +00128.000000,-00128.000000,+00128.000000\n         \
      \    Vertex   +00128.000000,+00128.000000,+00128.000000\n             Vertex\
      \   -00128.000000,+00128.000000,+00128.000000\n          End Polygon\n     \
      \     ...\n       End PolyList\n    End Brush\n    Brush=Model'Entry.Brush'\n\
      \    Name=Brush0\nEnd Actor</uscript>\n\n*MainScale: scales up or down current\
      \ brush before make it rotate.\n*PostScale: scales up or down current brush\
      \ after make it rotate.\n*TempScale: unknown effect\n*Location: where the brush\
      \ is located in the map\n*Rotation: contains up to 3 values\n**Roll: X axis\
      \ rotation\n**Pitch: Y axis rotation\n**Yaw: Z axis rotation\n*Begin Polygon\
      \ Item=OUTSIDE Texture=black1 Flags=4194304 Link=0\n**Texture: texture applied\
      \ to the current polygon with formatted string.\n***[TextureName] for Unreal\
      \ 1 / Unreal Tournament maps\n***[PackageName.TextureName] for other UTx games.\n\
      **Origin: where the texture is centered\n**Normal: normally, the perpendicular\
      \ vector of the surface where the texture is applied\n**Texture U,V: contains\
      \ information about scaling and texture rotation\n**PanU,PanV: only used in\
      \ Unreal Tournament and Unreal 1. Changes the texture origin coordinates.\n\
      **Vertex: X,Y,Z coordinates of the specified vertex\n\nNote: NumTriangles =\
      \ NumVertices-Floor(NumVertices/3)\n\n[[Image:texinfot3d.jpg]]\n\n===Loading\
      \ T3D brush geometry===\n\nYou must parse those informations correctly: PrePivot,\
      \ Location, Rotation, MainScale, PostScale, TempScale, Polygon / Vertexes\n\n\
      <uscript>\nFOR each vertex of each polygon of parsed brush DO:\n   do MainScale\
      \ ... x *= MainScale[x], y *= MainScale[y], z *= MainScale[z]\n   do translation\
      \ (-PrePivot[x], -PrePivot[y], -PrePivot[z])\n   do rotation Yaw, Pitch, Roll\n\
      \   do PostScale ... x *= PostScale[x], y *= PostScale[y], z *= PostScale[z]\n\
      \   do TempScale ... x *= TempScale[x], y *= TempScale[y], z *= TempScale[z]\n\
      \   do translation (Location[x], Location[y], Location[z])\nENDFOR\n</uscript>\n\
      \nNote:\nFor Unreal Engine 3.x based maps (Unreal Tournament 2004 and 2003),PostScale,MainScale,TempScale\
      \ and Rotation values are always null as the editor automatically updates vertices,origin\
      \ and normal values when scaling up/down or rotating a brush.\n\n\nRotation\
      \ matrix are the following:\n\n<uscript>Roll Matrix-X Axis:\n1, 0, 0, 0,\n0,\
      \ cos(roll),-sin(roll), 0,\n0, sin(roll),cos(roll), 0,\n0, 0, 0, 1</uscript>\n\
      \n<uscript>Pitch Matrix-Y Axis:\ncos(pitch), 0, sin(pitch), 0,\n0, 1, 0, 0,\n\
      -sin(pitch), 0,cos(pitch), 0,\n0, 0, 0, 1)</uscript>\n\n<uscript>Yaw Matrix-Z\
      \ Axis:\ncos(yaw), sin(yaw), 0, 0,\n-sin(yaw), cos(yaw), 0, 0,\n0, 0, 1, 0,\n\
      0, 0, 0, 1</uscript>\n\n<uscript>Global Rotation Matrix=(Roll Matrix)*(Pitch\
      \ Matrix)*(Yaw Matrix)</uscript>\n\nYaw, Roll and Pitch values are in radians.\
      \ Original values from t3d files are in \"Unreal format\" where 2 pi rads =\
      \ 65536.\nFor more information about Yaw, Pitch, Roll rotation matrix see http://mathworld.wolfram.com/EulerAngles.html.\n\
      \n=== Scaling up/down brushes ===\nThis operation is mainly needed when you\
      \ want to port Unreal 1 or Unreal Tournament map to Unreal Tournament 2004 or\
      \ Unreal Tournament 3.\n\nTo do so,considering ScaleFactor:\n<uscript>\nset\
      \ Location = ScaleFactor*Location\nset PrePivot = ScaleFactor*PrePivot\nFor\
      \ each polygon\n    set Origin = ScaleFactor*Origin\n    For each vertex\n \
      \     set Vertex = ScaleFactor*Vertex\n</uscript>\n\nUsually scale factor values:\n\
      Unreal 1/Unreal Tournament to UT2003/UT2004/UT3: 1.25\n\n=== Tools ===\n*[TODO\
      \ Fix Broken Link] Python T3D loader (doesn't care about texture informations):\
      \ http://carolina.mff.cuni.cz/~gib/ut_utils/unreal_t3d_loader.zip see readme.txt\
      \ in zip file\n*[[Legacy:MapScale|MapScale]] scales an entire .t3d file (only\
      \ works for UT/U1 maps)"
  properties: []
  revId: 40358
name: "Legacy:T3D Brush"
revision:
  revid: 40358
  parentid: 40353
  user: "Evil bill"
  timestamp: 1262043203.000000000
  comment: "/* Loading T3D brush geometry */"
timestamp: 1668800090.320933000
